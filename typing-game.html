<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed Typing Challenge - LetUsTech</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H548VRKNHW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-H548VRKNHW');
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
                const { useState, useEffect, useRef } = React;

                // Icon components
                const Trophy = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                    </svg>
                );

                const Clock = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                );

                const Target = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                );

                const Zap = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                );

                const BarChart3 = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                );

                const Settings = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                );

                const Award = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                    </svg>
                );

                const TrendingUp = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                    </svg>
                );


        const TypingChallenge = () => {
          const [mode, setMode] = useState('menu'); // menu, game, results, leaderboard, stats
          const [difficulty, setDifficulty] = useState('medium');
          const [gameMode, setGameMode] = useState('timed'); // timed, words, zen
          const [timeLimit, setTimeLimit] = useState(60);

          const [currentText, setCurrentText] = useState('');
          const [userInput, setUserInput] = useState('');
          const [startTime, setStartTime] = useState(null);
          const [endTime, setEndTime] = useState(null);
          const [isActive, setIsActive] = useState(false);
          const [timeLeft, setTimeLeft] = useState(60);
          const [currentIndex, setCurrentIndex] = useState(0);

          const [stats, setStats] = useState({
            wpm: 0,
            accuracy: 0,
            errors: 0,
            correctChars: 0,
            totalChars: 0
          });

          const [sentencesCompleted, setSentencesCompleted] = useState(0);
          const [totalCorrectChars, setTotalCorrectChars] = useState(0);
          const [totalErrors, setTotalErrors] = useState(0);
          const [cheatAttempt, setCheatAttempt] = useState(false);
          const [username, setUsername] = useState(() => {
            return localStorage.getItem('typingUsername') || '';
          });
          const [showUsernamePrompt, setShowUsernamePrompt] = useState(false);

          const [allTimeStats, setAllTimeStats] = useState(() => {
            const saved = localStorage.getItem('typingStats');
            return saved ? JSON.parse(saved) : {
              gamesPlayed: 0,
              bestWPM: 0,
              avgWPM: 0,
              totalWPM: 0,
              bestAccuracy: 0,
              totalAccuracy: 0,
              totalWordsTyped: 0
            };
          });

          const [leaderboard, setLeaderboard] = useState(() => {
            const saved = localStorage.getItem('typingLeaderboard');
            return saved ? JSON.parse(saved) : [];
          });

          const inputRef = useRef(null);

          const textSamples = {
            easy: [
              "The cat sat on the mat and looked at the rat.",
              "A big dog ran in the park with joy and fun.",
              "The sun is hot and the sky is blue today.",
              "I like to eat ice cream on a hot summer day.",
              "My friend has a red car and a blue bike.",
              "The bird sang a sweet song in the tree.",
              "We went to the beach and played in the sand.",
              "Mum made cookies and they smelled so good.",
              "The rainbow has many pretty colours in it.",
              "I love to read books before I go to bed.",
              "The fish swims fast in the clear blue water.",
              "My teacher is nice and helps me learn new things.",
              "The moon shines bright in the dark night sky.",
              "I can run fast and jump very high too.",
              "The baby laughed and clapped her tiny hands.",
              "We saw a bunny hop across the green grass.",
              "The flowers bloom in spring and smell nice.",
              "I help my dad wash the car on weekends.",
              "The pizza was hot and tasted really good.",
              "My sister and I play games after school.",
              "The train goes fast on the tracks to the city.",
              "I drew a picture with crayons in art class.",
              "The kite flew high up in the windy sky.",
              "We picked apples from the tree in autumn.",
              "The puppy wagged its tail when I came home."
            ],
            medium: [
              "Technology has revolutionised the way we communicate and interact with the world around us.",
              "The golden sunset painted the sky with brilliant shades of orange, pink, and purple.",
              "Learning to type quickly and accurately is a valuable skill in today's digital age.",
              "Mountains rise majestically into the clouds, their peaks covered in pristine white snow.",
              "Scientists discovered a new species of butterfly in the remote rainforest yesterday.",
              "The old library contained thousands of books spanning centuries of human knowledge and wisdom.",
              "Electric vehicles are becoming more popular as concerns about climate change continue to grow.",
              "Fresh coffee brewing in the morning is one of life's simple yet profound pleasures.",
              "The orchestra performed a stunning symphony that moved the audience to tears.",
              "Meditation and mindfulness practices can significantly reduce stress and improve mental health.",
              "The ancient ruins tell stories of civilisations that thrived thousands of years ago.",
              "Modern medicine has extended human lifespans and improved quality of life dramatically.",
              "The chef prepared an exquisite meal using locally sourced organic ingredients.",
              "Artificial intelligence is transforming industries from healthcare to transportation.",
              "The documentary explored the fascinating behaviour of dolphins in their natural habitat.",
              "Renewable energy sources like solar and wind power are crucial for our planet's future.",
              "The novelist spent five years researching and writing her acclaimed historical fiction.",
              "Urban gardens provide fresh produce and create green spaces in crowded cities.",
              "The photographer captured breathtaking images of wildlife during her expedition to Africa.",
              "Online education platforms have made learning accessible to millions of people worldwide.",
              "The archaeological team unearthed artefacts that shed new light on ancient trade routes.",
              "Climate scientists warn that immediate action is needed to address global warming.",
              "The marathon runner trained rigorously for months to achieve her personal best time.",
              "Traditional craftsmanship is being preserved through workshops and apprenticeship programmes.",
              "The telescope revealed distant galaxies that existed billions of years ago.",
              "The marine biologist studied coral reef ecosystems and their vulnerability to ocean acidification.",
              "Volunteer programmes connect communities and foster social responsibility among young people.",
              "The museum curator organised an exhibition showcasing contemporary sculpture and installation art.",
              "Sustainable fashion brands are challenging fast fashion by promoting ethical manufacturing practices.",
              "The children's hospital receives generous donations that fund critical medical equipment and research."
            ],
            hard: [
              "Quantum mechanics fundamentally challenges our intuitive understanding of reality through phenomena like superposition and entanglement.",
              "The juxtaposition of contemporary architecture against historical landmarks creates an intriguing dichotomy in modern cities.",
              "Neuroplasticity demonstrates the brain's remarkable ability to reorganise and adapt throughout an individual's lifetime.",
              "Cryptocurrency's decentralised nature represents a paradigm shift in how we conceptualise monetary systems and financial transactions.",
              "Philosophical discourse regarding consciousness examines the intricate relationship between subjective experience and objective reality.",
              "Biodiversity conservation requires multifaceted approaches encompassing habitat protection, sustainable resource management, and community engagement.",
              "Linguistic anthropologists investigate how language shapes cultural identity and influences social hierarchies within communities.",
              "Genomic sequencing technologies have revolutionised personalised medicine by enabling targeted therapeutic interventions.",
              "Macroeconomic indicators such as inflation rates and unemployment statistics inform governmental fiscal policy decisions.",
              "Postmodern literary criticism deconstructs traditional narrative structures to reveal underlying ideological assumptions and power dynamics.",
              "Sustainable agriculture practices integrate ecological principles with traditional farming methods to ensure long-term food security.",
              "Cognitive psychology explores mental processes including perception, memory, attention, and problem-solving mechanisms.",
              "Geopolitical tensions often arise from competing national interests regarding territorial sovereignty and resource allocation.",
              "Renewable energy infrastructure requires substantial initial investment but offers considerable long-term economic benefits.",
              "Constitutional law establishes fundamental rights while delineating governmental powers and limiting potential abuses of authority.",
              "Evolutionary biology examines adaptation mechanisms through natural selection processes operating across geological timescales.",
              "Biotechnology innovations enable genetic modification techniques that enhance agricultural productivity and disease resistance.",
              "Sociological research investigates systemic inequalities perpetuated through institutional structures and cultural norms.",
              "Astrophysical observations provide empirical evidence supporting theoretical models of cosmic inflation and dark matter distribution.",
              "Immunological responses involve complex cellular interactions that distinguish pathogens from healthy tissue.",
              "Neuroscientific investigations utilise functional magnetic resonance imaging to map cortical activation patterns during cognitive tasks.",
              "Palaeontological evidence suggests that mass extinction events profoundly influenced evolutionary trajectories throughout geological history.",
              "Comparative literature scholars analyse intertextual relationships between canonical works across diverse cultural traditions.",
              "Epidemiological studies examine disease transmission dynamics to inform public health intervention strategies.",
              "Computational linguistics employs machine learning algorithms to model syntactic structures and semantic relationships in natural language."
            ],
            expert: [
              "Epistemological considerations regarding phenomenological consciousness necessitate rigorous examination of qualia and their irreducibility to physicalist explanations.",
              "Cryptographic algorithms utilising elliptic curve discrete logarithm problems provide asymmetric encryption methodologies resistant to conventional computational attacks.",
              "Thermodynamic equilibrium states emerge from statistical mechanical considerations of ensemble distributions across microstates with equivalent macroscopic properties.",
              "Transcendental phenomenology interrogates intentionality structures constituting intersubjective lifeworld experiences through eidetic reduction methodologies.",
              "Heuristic algorithms leveraging metaheuristic optimisation frameworks demonstrate superior convergence characteristics for NP-complete computational problems.",
              "Topological invariants characterise manifold structures through algebraic techniques revealing fundamental geometric properties resistant to continuous deformations.",
              "Stochastic differential equations model random dynamical systems incorporating Brownian motion processes and Itô calculus formulations.",
              "Chromatographic separation techniques exploit differential affinities between analytes and stationary phases to achieve compound purification.",
              "Bayesian inference methodologies incorporate prior probability distributions with empirical observations to generate posterior probability estimates.",
              "Metamorphic petrology investigates mineralogical transformations occurring under elevated temperature and pressure regimes within Earth's crust.",
              "Syntactic parsing algorithms employ context-free grammars and probabilistic models to analyse hierarchical linguistic structures.",
              "Hamiltonian mechanics reformulates Newtonian dynamics through canonical coordinates revealing conservation laws and symmetry principles.",
              "Electrochemical impedance spectroscopy characterises interfacial charge transfer kinetics through frequency-dependent complex impedance measurements.",
              "Gauge theories unify fundamental interactions through local symmetry transformations and associated vector boson mediators.",
              "Convex optimisation techniques guarantee global minima identification through objective function curvature properties and constraint qualifications.",
              "Spectrophotometric quantification employs Beer-Lambert law relationships correlating absorbance measurements with analyte concentrations.",
              "Riemann surfaces provide geometric frameworks for analysing multivalued complex functions through branch cut and sheet constructions.",
              "Fourier transform infrared spectroscopy identifies molecular functional groups through characteristic vibrational absorption frequencies.",
              "Differential geometry characterises curved spaces through metric tensors and covariant derivative operators.",
              "Polymerase chain reaction amplification exponentially replicates target DNA sequences through thermocycling protocols.",
              "Quantum field theoretical formulations incorporate renormalisation procedures to eliminate ultraviolet divergences in perturbative calculations.",
              "Homological algebra investigates derived functors and spectral sequences to compute topological invariants of chain complexes.",
              "Crystallographic symmetry operations define space groups characterising three-dimensional periodic atomic arrangements in solid materials.",
              "Nonlinear partial differential equations exhibit soliton solutions representing localised wave phenomena with remarkable stability properties.",
              "Molecular orbital theory employs linear combinations of atomic orbitals to predict electronic structure and chemical bonding characteristics."
            ]
          };

          const getRandomText = () => {
            const samples = textSamples[difficulty];
            return samples[Math.floor(Math.random() * samples.length)];
          };

          useEffect(() => {
            if (isActive && timeLeft > 0 && (gameMode === 'timed' || gameMode === 'words')) {
              const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);
              return () => clearTimeout(timer);
            } else if (isActive && timeLeft === 0 && (gameMode === 'timed' || gameMode === 'words')) {
              finishGame();
            }
          }, [isActive, timeLeft, gameMode]);

          const startGame = () => {
            // Check if username is set, if not prompt for it
            if (!username || username.trim() === '') {
              setShowUsernamePrompt(true);
              return;
            }

            const text = getRandomText();
            setCurrentText(text);
            setUserInput('');
            setCurrentIndex(0);
            setStartTime(Date.now());
            setEndTime(null);
            setIsActive(true);
            setTimeLeft(timeLimit);
            setStats({ wpm: 0, accuracy: 0, errors: 0, correctChars: 0, totalChars: 0 });
            setSentencesCompleted(0);
            setTotalCorrectChars(0);
            setTotalErrors(0);
            setCheatAttempt(false);
            setMode('game');
            setTimeout(() => inputRef.current?.focus(), 100);
          };

          const saveUsername = (name) => {
            const trimmedName = name.trim();
            if (trimmedName) {
              setUsername(trimmedName);
              localStorage.setItem('typingUsername', trimmedName);
              setShowUsernamePrompt(false);
              // Start game after setting username by directly calling game start logic
              const text = getRandomText();
              setCurrentText(text);
              setUserInput('');
              setCurrentIndex(0);
              setStartTime(Date.now());
              setEndTime(null);
              setIsActive(true);
              setTimeLeft(timeLimit);
              setStats({ wpm: 0, accuracy: 0, errors: 0, correctChars: 0, totalChars: 0 });
              setSentencesCompleted(0);
              setTotalCorrectChars(0);
              setTotalErrors(0);
              setCheatAttempt(false);
              setMode('game');
              setTimeout(() => inputRef.current?.focus(), 100);
            }
          };

          const loadNextSentence = () => {
            // Calculate stats for completed sentence
            let correctChars = 0;
            let errors = 0;

            for (let i = 0; i < userInput.length; i++) {
              if (userInput[i] === currentText[i]) {
                correctChars++;
              } else {
                errors++;
              }
            }

            setTotalCorrectChars(prev => prev + correctChars);
            setTotalErrors(prev => prev + errors);
            setSentencesCompleted(prev => prev + 1);

            // Load new sentence
            const text = getRandomText();
            setCurrentText(text);
            setUserInput('');
            setCurrentIndex(0);

            // Keep focus on input
            setTimeout(() => inputRef.current?.focus(), 0);
          };

          const finishGame = () => {
            setIsActive(false);
            setEndTime(Date.now());
            calculateFinalStats();
            setMode('results');
          };

          const calculateFinalStats = () => {
            const timeElapsed = (gameMode === 'zen' || !startTime)
              ? (Date.now() - startTime) / 1000
              : timeLimit;
            const minutes = timeElapsed / 60;

            // Add current sentence stats to totals
            let currentCorrect = 0;
            let currentErrors = 0;

            for (let i = 0; i < userInput.length; i++) {
              if (userInput[i] === currentText[i]) {
                currentCorrect++;
              } else {
                currentErrors++;
              }
            }

            const finalCorrectChars = totalCorrectChars + currentCorrect;
            const finalErrors = totalErrors + currentErrors;
            const totalTyped = finalCorrectChars + finalErrors;

            // Calculate words from total characters (average word is 5 chars + space)
            const wordsTyped = Math.floor(finalCorrectChars / 5);
            const wpm = Math.round(wordsTyped / minutes);
            const accuracy = totalTyped > 0 ? Math.round((finalCorrectChars / totalTyped) * 100) : 0;

            const newStats = {
              wpm,
              accuracy,
              errors: finalErrors,
              correctChars: finalCorrectChars,
              totalChars: totalTyped
            };

            setStats(newStats);
            updateAllTimeStats(newStats);
            updateLeaderboard(newStats);
          };

          const updateAllTimeStats = (newStats) => {
            const wordsTyped = Math.floor(newStats.correctChars / 5);

            const updated = {
              gamesPlayed: allTimeStats.gamesPlayed + 1,
              bestWPM: Math.max(allTimeStats.bestWPM, newStats.wpm),
              avgWPM: Math.round((allTimeStats.totalWPM + newStats.wpm) / (allTimeStats.gamesPlayed + 1)),
              totalWPM: allTimeStats.totalWPM + newStats.wpm,
              bestAccuracy: Math.max(allTimeStats.bestAccuracy, newStats.accuracy),
              totalAccuracy: allTimeStats.totalAccuracy + newStats.accuracy,
              totalWordsTyped: allTimeStats.totalWordsTyped + wordsTyped
            };

            setAllTimeStats(updated);
            localStorage.setItem('typingStats', JSON.stringify(updated));
          };

          const updateLeaderboard = (newStats) => {
            const entry = {
              username: username,
              wpm: newStats.wpm,
              accuracy: newStats.accuracy,
              difficulty,
              mode: gameMode,
              date: new Date().toISOString()
            };

            const updated = [...leaderboard, entry]
              .sort((a, b) => b.wpm - a.wpm)
              .slice(0, 10);

            setLeaderboard(updated);
            localStorage.setItem('typingLeaderboard', JSON.stringify(updated));
          };

          const handleInput = (e) => {
            if (!isActive) return;

            const value = e.target.value;
            setUserInput(value);
            setCurrentIndex(value.length);

            // Check if sentence is completed
            if (value.length === currentText.length) {
              loadNextSentence();
              return;
            }

            // Real-time stats calculation using cumulative totals
            if (startTime) {
              const timeElapsed = (Date.now() - startTime) / 1000 / 60;

              let currentCorrect = 0;
              for (let i = 0; i < value.length; i++) {
                if (value[i] === currentText[i]) currentCorrect++;
              }

              const cumulativeCorrect = totalCorrectChars + currentCorrect;
              const wordsTyped = Math.floor(cumulativeCorrect / 5);
              const currentWPM = Math.round(wordsTyped / timeElapsed);

              const cumulativeTotal = totalCorrectChars + totalErrors + value.length;
              const currentAccuracy = cumulativeTotal > 0 ? Math.round((cumulativeCorrect / cumulativeTotal) * 100) : 100;

              setStats(prev => ({
                ...prev,
                wpm: currentWPM,
                accuracy: currentAccuracy,
                correctChars: cumulativeCorrect,
                totalChars: cumulativeTotal,
                errors: totalErrors + (value.length - currentCorrect)
              }));
            }
          };

          const preventCheating = (e) => {
            // Prevent copy, paste, cut
            if (e.type === 'copy' || e.type === 'paste' || e.type === 'cut') {
              e.preventDefault();
              showCheatWarning();
              return false;
            }

            // Prevent keyboard shortcuts
            if (e.ctrlKey || e.metaKey) {
              if (e.key === 'c' || e.key === 'v' || e.key === 'x' || e.key === 'a') {
                e.preventDefault();
                showCheatWarning();
                return false;
              }
            }
          };

          const preventContextMenu = (e) => {
            e.preventDefault();
            showCheatWarning();
            return false;
          };

          const showCheatWarning = () => {
            setCheatAttempt(true);
            setTimeout(() => setCheatAttempt(false), 2000);
          };

          const getCharacterClass = (index) => {
            if (index >= userInput.length) return 'text-gray-400';
            if (userInput[index] === currentText[index]) return 'text-green-500 bg-green-50';
            return 'text-red-500 bg-red-50';
          };

          const resetStats = () => {
            if (confirm('Are you sure you want to reset all statistics? This cannot be undone.')) {
              setAllTimeStats({
                gamesPlayed: 0,
                bestWPM: 0,
                avgWPM: 0,
                totalWPM: 0,
                bestAccuracy: 0,
                totalAccuracy: 0,
                totalWordsTyped: 0
              });
              setLeaderboard([]);
              localStorage.removeItem('typingStats');
              localStorage.removeItem('typingLeaderboard');
            }
          };

          const renderMenu = () => (
            <div className="bg-gradient-to-br from-blue-50 to-indigo-100 p-8 min-h-[calc(100vh-64px)]">
              <div className="max-w-4xl mx-auto">
                <div className="text-center mb-12">
                  <h1 className="text-6xl font-bold text-indigo-900 mb-4 flex items-center justify-center gap-3">
                    <Zap className="w-12 h-12" />
                    Speed Typing Challenge
                  </h1>
                  <p className="text-xl text-indigo-700">Test your typing speed and accuracy!</p>
                </div>

                <div className="grid md:grid-cols-2 gap-6 mb-8">
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h2 className="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                      <Settings className="w-6 h-6" />
                      Game Settings
                    </h2>

                    <div className="space-y-4">
                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-2">Your Name</label>
                        <input
                          type="text"
                          value={username}
                          onChange={(e) => {
                            const newName = e.target.value;
                            setUsername(newName);
                            localStorage.setItem('typingUsername', newName);
                          }}
                          placeholder="Enter your name"
                          maxLength={20}
                          className="w-full p-3 border-2 border-indigo-200 rounded-lg focus:border-indigo-500 focus:outline-none"
                        />
                        {username && (
                          <p className="text-sm text-green-600 mt-1">? Playing as: {username}</p>
                        )}
                      </div>

                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-2">Difficulty</label>
                        <select
                          value={difficulty}
                          onChange={(e) => setDifficulty(e.target.value)}
                          className="w-full p-3 border-2 border-indigo-200 rounded-lg focus:border-indigo-500 focus:outline-none"
                        >
                          <option value="easy">Easy - Simple words</option>
                          <option value="medium">Medium - Standard text</option>
                          <option value="hard">Hard - Complex vocabulary</option>
                          <option value="expert">Expert - Technical terms</option>
                        </select>
                      </div>

                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-2">Game Mode</label>
                        <select
                          value={gameMode}
                          onChange={(e) => setGameMode(e.target.value)}
                          className="w-full p-3 border-2 border-indigo-200 rounded-lg focus:border-indigo-500 focus:outline-none"
                        >
                          <option value="timed">Timed - Type as many sentences as possible</option>
                          <option value="words">Words - Complete sentences until time runs out</option>
                          <option value="zen">Zen - Practice at your own pace</option>
                        </select>
                      </div>

                      {gameMode === 'timed' && (
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">Time Limit</label>
                          <select
                            value={timeLimit}
                            onChange={(e) => setTimeLimit(Number(e.target.value))}
                            className="w-full p-3 border-2 border-indigo-200 rounded-lg focus:border-indigo-500 focus:outline-none"
                          >
                            <option value={30}>30 seconds</option>
                            <option value={60}>60 seconds</option>
                            <option value={120}>2 minutes</option>
                            <option value={300}>5 minutes</option>
                          </select>
                        </div>
                      )}
                    </div>

                    <button
                      onClick={startGame}
                      className="w-full mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-lg transition-colors flex items-center justify-center gap-2 text-lg"
                    >
                      <Zap className="w-6 h-6" />
                      Start Challenge
                    </button>
                  </div>

                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h2 className="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                      <BarChart3 className="w-6 h-6" />
                      Your Statistics
                    </h2>

                    <div className="space-y-4">
                      <div className="flex justify-between items-center p-3 bg-indigo-50 rounded-lg">
                        <span className="text-gray-700 font-medium">Games Played</span>
                        <span className="text-2xl font-bold text-indigo-600">{allTimeStats.gamesPlayed}</span>
                      </div>

                      <div className="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                        <span className="text-gray-700 font-medium">Best WPM</span>
                        <span className="text-2xl font-bold text-green-600">{allTimeStats.bestWPM}</span>
                      </div>

                      <div className="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                        <span className="text-gray-700 font-medium">Average WPM</span>
                        <span className="text-2xl font-bold text-blue-600">{allTimeStats.avgWPM}</span>
                      </div>

                      <div className="flex justify-between items-center p-3 bg-purple-50 rounded-lg">
                        <span className="text-gray-700 font-medium">Best Accuracy</span>
                        <span className="text-2xl font-bold text-purple-600">{allTimeStats.bestAccuracy}%</span>
                      </div>

                      <div className="flex justify-between items-center p-3 bg-orange-50 rounded-lg">
                        <span className="text-gray-700 font-medium">Total Words</span>
                        <span className="text-2xl font-bold text-orange-600">{allTimeStats.totalWordsTyped}</span>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="grid md:grid-cols-2 gap-6">
                  <button
                    onClick={() => setMode('leaderboard')}
                    className="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-4 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
                  >
                    <Trophy className="w-6 h-6" />
                    View Leaderboard
                  </button>

                  <button
                    onClick={resetStats}
                    className="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-lg transition-colors"
                  >
                    Reset All Statistics
                  </button>
                </div>
              </div>
            </div>
          );

          const renderGame = () => (
            <div className="bg-gradient-to-br from-indigo-50 to-purple-100 p-8 min-h-[calc(100vh-64px)]">
              <div className="max-w-4xl mx-auto">
                {cheatAttempt && (
                  <div className="fixed top-24 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-bounce">
                    ?? No cheating! Type it yourself!
                  </div>
                )}

                <div className="bg-white rounded-xl shadow-2xl p-8">
                  <div className="flex justify-between items-center mb-6">
                    <div className="flex gap-6">
                      <div className="flex items-center gap-2">
                        <Clock className="w-6 h-6 text-indigo-600" />
                        <div>
                          <div className="text-sm text-gray-600">Time</div>
                          <div className="text-2xl font-bold text-indigo-600">
                            {gameMode === 'zen'
                              ? `${Math.floor((Date.now() - startTime) / 1000)}s`
                              : `${timeLeft}s`
                            }
                          </div>
                        </div>
                      </div>

                      <div className="flex items-center gap-2">
                        <Zap className="w-6 h-6 text-green-600" />
                        <div>
                          <div className="text-sm text-gray-600">WPM</div>
                          <div className="text-2xl font-bold text-green-600">{stats.wpm}</div>
                        </div>
                      </div>

                      <div className="flex items-center gap-2">
                        <Target className="w-6 h-6 text-blue-600" />
                        <div>
                          <div className="text-sm text-gray-600">Accuracy</div>
                          <div className="text-2xl font-bold text-blue-600">{stats.accuracy}%</div>
                        </div>
                      </div>

                      <div className="flex items-center gap-2">
                        <Award className="w-6 h-6 text-purple-600" />
                        <div>
                          <div className="text-sm text-gray-600">Sentences</div>
                          <div className="text-2xl font-bold text-purple-600">{sentencesCompleted}</div>
                        </div>
                      </div>
                    </div>

                    <div className="flex gap-2">
                      {gameMode === 'zen' && (
                        <button
                          onClick={finishGame}
                          className="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg"
                        >
                          Finish
                        </button>
                      )}
                      <button
                        onClick={() => {
                          setIsActive(false);
                          setMode('menu');
                        }}
                        className="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg"
                      >
                        Exit
                      </button>
                    </div>
                  </div>

                  <div className="mb-6 p-6 bg-gray-50 rounded-lg select-none" onContextMenu={preventContextMenu}>
                    <div className="text-2xl font-mono leading-relaxed break-words">
                      {currentText.split('').map((char, index) => (
                        <span key={index} className={getCharacterClass(index)}>
                          {char}
                        </span>
                      ))}
                    </div>
                  </div>

                  <textarea
                    ref={inputRef}
                    value={userInput}
                    onChange={handleInput}
                    onCopy={preventCheating}
                    onPaste={preventCheating}
                    onCut={preventCheating}
                    onKeyDown={preventCheating}
                    onContextMenu={preventContextMenu}
                    disabled={!isActive}
                    className="w-full p-4 text-xl font-mono border-2 border-indigo-300 rounded-lg focus:border-indigo-500 focus:outline-none resize-none select-none"
                    rows={5}
                    placeholder="Start typing here..."
                    spellCheck={false}
                    autoComplete="off"
                    autoCorrect="off"
                    autoCapitalize="off"
                  />

                  <div className="mt-4 flex justify-between text-sm text-gray-600">
                    <span>Correct: {stats.correctChars} | Errors: {stats.errors}</span>
                    <span>Current Progress: {currentIndex}/{currentText.length}</span>
                  </div>
                </div>
              </div>
            </div>
          );

          const renderResults = () => (
            <div className="bg-gradient-to-br from-green-50 to-emerald-100 p-8 min-h-[calc(100vh-64px)]">
              <div className="max-w-4xl mx-auto">
                <div className="bg-white rounded-xl shadow-2xl p-8 text-center">
                  <div className="mb-6">
                    <Trophy className="w-20 h-20 text-yellow-500 mx-auto mb-4" />
                    <h1 className="text-4xl font-bold text-gray-800 mb-2">Challenge Complete!</h1>
                    <p className="text-xl text-gray-600">Here are your results</p>
                  </div>

                  <div className="grid md:grid-cols-2 gap-6 mb-8">
                    <div className="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl">
                      <Zap className="w-12 h-12 text-green-600 mx-auto mb-2" />
                      <div className="text-5xl font-bold text-green-600 mb-2">{stats.wpm}</div>
                      <div className="text-gray-700 font-semibold">Words Per Minute</div>
                      {stats.wpm === allTimeStats.bestWPM && stats.wpm > 0 && (
                        <div className="mt-2 text-sm text-green-700 font-bold">?? New Personal Best!</div>
                      )}
                    </div>

                    <div className="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl">
                      <Target className="w-12 h-12 text-blue-600 mx-auto mb-2" />
                      <div className="text-5xl font-bold text-blue-600 mb-2">{stats.accuracy}%</div>
                      <div className="text-gray-700 font-semibold">Accuracy</div>
                      {stats.accuracy === allTimeStats.bestAccuracy && stats.accuracy > 0 && (
                        <div className="mt-2 text-sm text-blue-700 font-bold">?? Perfect!</div>
                      )}
                    </div>

                    <div className="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl">
                      <Award className="w-12 h-12 text-purple-600 mx-auto mb-2" />
                      <div className="text-3xl font-bold text-purple-600 mb-2">{sentencesCompleted}</div>
                      <div className="text-gray-700 font-semibold">Sentences Completed</div>
                    </div>

                    <div className="bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-xl">
                      <TrendingUp className="w-12 h-12 text-orange-600 mx-auto mb-2" />
                      <div className="text-3xl font-bold text-orange-600 mb-2">{stats.correctChars}</div>
                      <div className="text-gray-700 font-semibold">Characters Typed</div>
                    </div>
                  </div>

                  <div className="bg-indigo-50 p-6 rounded-xl mb-8">
                    <h3 className="text-xl font-bold text-gray-800 mb-4">Performance Rating</h3>
                    <div className="text-4xl mb-2">
                      {stats.wpm >= 80 && stats.accuracy >= 95 ? '?? Master' :
                       stats.wpm >= 60 && stats.accuracy >= 90 ? '? Expert' :
                       stats.wpm >= 40 && stats.accuracy >= 85 ? '?? Advanced' :
                       stats.wpm >= 25 && stats.accuracy >= 80 ? '?? Intermediate' :
                       '?? Beginner'}
                    </div>
                    <p className="text-gray-700">
                      {stats.wpm >= 80 && stats.accuracy >= 95 ? 'Outstanding performance! You\'re a typing master!' :
                       stats.wpm >= 60 && stats.accuracy >= 90 ? 'Excellent work! Keep up the great pace!' :
                       stats.wpm >= 40 && stats.accuracy >= 85 ? 'Great job! You\'re making solid progress!' :
                       stats.wpm >= 25 && stats.accuracy >= 80 ? 'Good effort! Keep practicing to improve!' :
                       'Nice start! Practice makes perfect!'}
                    </p>
                  </div>

                  <div className="flex gap-4 justify-center">
                    <button
                      onClick={startGame}
                      className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-lg transition-colors"
                    >
                      Try Again
                    </button>
                    <button
                      onClick={() => setMode('menu')}
                      className="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg transition-colors"
                    >
                      Back to Menu
                    </button>
                    <button
                      onClick={() => setMode('leaderboard')}
                      className="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-8 rounded-lg transition-colors"
                    >
                      Leaderboard
                    </button>
                  </div>
                </div>
              </div>
            </div>
          );

          const renderLeaderboard = () => (
            <div className="bg-gradient-to-br from-yellow-50 to-orange-100 p-8 min-h-[calc(100vh-64px)]">
              <div className="max-w-4xl mx-auto">
                <div className="bg-white rounded-xl shadow-2xl p-8">
                  <h1 className="text-4xl font-bold text-gray-800 mb-8 flex items-center justify-center gap-3">
                    <Trophy className="w-10 h-10 text-yellow-500" />
                    Top 10 Leaderboard
                  </h1>

                  {leaderboard.length === 0 ? (
                    <div className="text-center py-12">
                      <p className="text-xl text-gray-600">No scores yet. Complete a challenge to get on the leaderboard!</p>
                    </div>
                  ) : (
                    <div className="space-y-3">
                      {leaderboard.map((entry, index) => (
                        <div
                          key={index}
                          className={`flex items-center justify-between p-4 rounded-lg ${
                            index === 0 ? 'bg-gradient-to-r from-yellow-100 to-yellow-200 border-2 border-yellow-400' :
                            index === 1 ? 'bg-gradient-to-r from-gray-100 to-gray-200 border-2 border-gray-400' :
                            index === 2 ? 'bg-gradient-to-r from-orange-100 to-orange-200 border-2 border-orange-400' :
                            'bg-gray-50'
                          }`}
                        >
                          <div className="flex items-center gap-4">
                            <div className={`text-2xl font-bold ${
                              index === 0 ? 'text-yellow-600' :
                              index === 1 ? 'text-gray-600' :
                              index === 2 ? 'text-orange-600' :
                              'text-gray-500'
                            }`}>
                              #{index + 1}
                            </div>
                            <div>
                              <div className="font-bold text-gray-800 text-lg">
                                {entry.username || 'Anonymous'} - {entry.wpm} WPM
                              </div>
                              <div className="text-sm text-gray-600">
                                {entry.accuracy}% accuracy • {entry.difficulty} • {entry.mode}
                              </div>
                            </div>
                          </div>
                          <div className="text-sm text-gray-500">
                            {new Date(entry.date).toLocaleDateString()}
                          </div>
                        </div>
                      ))}
                    </div>
                  )}

                  <button
                    onClick={() => setMode('menu')}
                    className="w-full mt-8 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors"
                  >
                    Back to Menu
                  </button>
                </div>
              </div>
            </div>
          );

          const renderHeader = () => (
            <header className="bg-gray-800 text-white shadow-lg">
              <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
                <a href="index.html" className="flex items-center gap-2 hover:opacity-80 transition-opacity">
                  <div className="bg-white text-gray-800 px-3 py-2 rounded font-bold">
                    LetUsTech
                  </div>
                </a>

                <nav className="hidden md:flex items-center gap-8">
                  <a href="index.html#about" className="hover:text-gray-300 transition-colors">About</a>
                  <a href="index.html#programs" className="hover:text-gray-300 transition-colors">Programs</a>
                  <a href="index.html#games" className="hover:text-gray-300 transition-colors">Games</a>
                  <a href="index.html#blog" className="hover:text-gray-300 transition-colors">Blog</a>
                  <a href="index.html#faq" className="hover:text-gray-300 transition-colors">FAQ</a>
                  <a href="index.html#contact" className="hover:text-gray-300 transition-colors">Contact</a>
                  <a
                    href="index.html#donate"
                    className="bg-green-500 hover:bg-green-600 px-6 py-2 rounded-lg font-semibold transition-colors"
                  >
                    Donate
                  </a>
                </nav>

                {/* Mobile menu button */}
                <button className="md:hidden text-white">
                  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                  </svg>
                </button>
              </div>
            </header>
          );

          const renderUsernamePrompt = () => {
            const [tempUsername, setTempUsername] = React.useState('');

            return (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div className="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4">
                  <h2 className="text-2xl font-bold text-gray-800 mb-4">Enter Your Name</h2>
                  <p className="text-gray-600 mb-6">Please enter your name to appear on the leaderboard!</p>
                  <input
                    type="text"
                    value={tempUsername}
                    onChange={(e) => setTempUsername(e.target.value)}
                    onKeyPress={(e) => {
                      if (e.key === 'Enter' && tempUsername.trim()) {
                        saveUsername(tempUsername);
                      }
                    }}
                    placeholder="Your name"
                    maxLength={20}
                    autoFocus
                    className="w-full p-3 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 focus:outline-none mb-4"
                  />
                  <div className="flex gap-3">
                    <button
                      onClick={() => {
                        if (tempUsername.trim()) {
                          saveUsername(tempUsername);
                        }
                      }}
                      disabled={!tempUsername.trim()}
                      className="flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-colors"
                    >
                      Start Game
                    </button>
                    <button
                      onClick={() => setShowUsernamePrompt(false)}
                      className="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-6 rounded-lg transition-colors"
                    >
                      Cancel
                    </button>
                  </div>
                </div>
              </div>
            );
          };

          return (
            <div>
              {renderHeader()}
              {showUsernamePrompt && renderUsernamePrompt()}
              {mode === 'menu' && renderMenu()}
              {mode === 'game' && renderGame()}
              {mode === 'results' && renderResults()}
              {mode === 'leaderboard' && renderLeaderboard()}
            </div>
          );
        };

                ReactDOM.render(<TypingChallenge />, document.getElementById('root'));
    </script>
</body>
</html>
