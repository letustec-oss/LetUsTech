<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed Typing Challenge - LetUsTech</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H548VRKNHW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-H548VRKNHW');
    </script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'navy-dark': '#0a1128',
                        'navy-primary': '#1e3a5f',
                        'navy-light': '#2d5f8d',
                        'green-primary': '#10b981',
                        'green-light': '#34d399',
                        'green-dark': '#059669',
                    }
                }
            }
        }
    </script>
    <style>
        /* Navigation styling */
        .nav-header {
            background: linear-gradient(135deg, #2d4a6e 0%, #1e3a5f 50%, #0f2744 100%);
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .nav-link {
            color: #e5e7eb;
            transition: color 0.3s ease;
        }

            .nav-link:hover {
                color: #10b981;
            }

        .donate-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            transition: all 0.3s ease;
        }

            .donate-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
            }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
                const { useState, useEffect, useRef } = React;

                // Icon components
                const Trophy = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                    </svg>
                );

                const Clock = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                );

                const Target = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                );

                const Zap = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                );

                const BarChart3 = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                );

                const Settings = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                );

                const Award = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                    </svg>
                );

                const TrendingUp = (props) => (
                    <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                    </svg>
                );


        const TypingChallenge = () => {
          const [mode, setMode] = useState('menu'); // menu, game, results, leaderboard, stats
          const [difficulty, setDifficulty] = useState('medium');
          const [gameMode, setGameMode] = useState('timed'); // timed, words, zen
          const [timeLimit, setTimeLimit] = useState(60);
          const [isLoading, setIsLoading] = useState(true);

          const [currentText, setCurrentText] = useState('');
          const [userInput, setUserInput] = useState('');
          const [startTime, setStartTime] = useState(null);
          const [endTime, setEndTime] = useState(null);
          const [isActive, setIsActive] = useState(false);
          const [timeLeft, setTimeLeft] = useState(60);
          const [currentIndex, setCurrentIndex] = useState(0);

          const [stats, setStats] = useState({
            wpm: 0,
            accuracy: 0,
            errors: 0,
            correctChars: 0,
            totalChars: 0
          });

          const [sentencesCompleted, setSentencesCompleted] = useState(0);
          const [totalCorrectChars, setTotalCorrectChars] = useState(0);
          const [totalErrors, setTotalErrors] = useState(0);
          const [cheatAttempt, setCheatAttempt] = useState(false);
          const [username, setUsername] = useState(() => {
            return localStorage.getItem('typingUsername') || '';
          });
          const [showUsernamePrompt, setShowUsernamePrompt] = useState(false);

          const [allTimeStats, setAllTimeStats] = useState(() => {
            const saved = localStorage.getItem('typingStats');
            return saved ? JSON.parse(saved) : {
              gamesPlayed: 0,
              totalWPM: 0,
              bestWPM: 0,
              totalAccuracy: 0,
              bestAccuracy: 0,
              totalTime: 0
            };
          });

          // Loading effect
          useEffect(() => {
            const timer = setTimeout(() => {
              setIsLoading(false);
            }, 2000);
            return () => clearTimeout(timer);
          }, []);

          const textSamples = {
            easy: [
              "The cat sat on the mat.",
              "Dogs like to play in the park.",
              "Birds fly high in the sky.",
              "Fish swim in the sea.",
              "The sun rises in the east.",
              "Rain falls from clouds.",
              "Trees grow tall and strong.",
              "Flowers bloom in spring.",
              "Snow is white and cold.",
              "Stars shine at night."
            ],
            medium: [
              "Technology advances rapidly in modern society.",
              "Artificial intelligence transforms our daily lives.",
              "Climate change affects ecosystems worldwide.",
              "Innovation drives economic growth and development.",
              "Education empowers individuals to achieve their dreams.",
              "Renewable energy sources are becoming more efficient.",
              "Digital communication connects people across continents.",
              "Scientific research expands human knowledge constantly.",
              "Global trade shapes international relationships today.",
              "Healthcare technology improves patient outcomes significantly."
            ],
            hard: [
              "The unprecedented proliferation of technological advancements has fundamentally transformed contemporary society.",
              "Quantum computing represents a paradigmatic shift in computational capabilities and cryptographic security.",
              "Neuroplasticity demonstrates the brain's remarkable capacity for adaptation and cognitive reorganization.",
              "Bioengineering innovations facilitate unprecedented therapeutic interventions for previously incurable conditions.",
              "Geopolitical dynamics increasingly reflect the complexities of interconnected global economic systems.",
              "Epistemological frameworks fundamentally influence our understanding of scientific methodology and validation.",
              "Cryptocurrency and blockchain technology challenge traditional financial institutions and regulatory frameworks.",
              "Phenomenological approaches to consciousness illuminate the subjective nature of human experience.",
              "Sustainable development requires balancing economic growth with environmental conservation imperatives.",
              "Anthropogenic climate change necessitates immediate comprehensive international policy coordination."
            ]
          };

          const inputRef = useRef(null);

          const getRandomText = () => {
            const samples = textSamples[difficulty];
            return samples[Math.floor(Math.random() * samples.length)];
          };

          const startGame = () => {
            if (!username.trim()) {
              setShowUsernamePrompt(true);
              return;
            }

            const text = getRandomText();
            setCurrentText(text);
            setUserInput('');
            setStartTime(Date.now());
            setIsActive(true);
            setMode('game');
            setCurrentIndex(0);
            setSentencesCompleted(0);
            setTotalCorrectChars(0);
            setTotalErrors(0);
            setCheatAttempt(false);

            if (gameMode === 'timed') {
              setTimeLeft(timeLimit);
            }

            setTimeout(() => {
              if (inputRef.current) {
                inputRef.current.focus();
              }
            }, 100);
          };

          const saveUsername = (name) => {
            const trimmedName = name.trim();
            setUsername(trimmedName);
            localStorage.setItem('typingUsername', trimmedName);
            setShowUsernamePrompt(false);

            // Start the game after saving username
            const text = getRandomText();
            setCurrentText(text);
            setUserInput('');
            setStartTime(Date.now());
            setIsActive(true);
            setMode('game');
            setCurrentIndex(0);
            setSentencesCompleted(0);
            setTotalCorrectChars(0);
            setTotalErrors(0);
            setCheatAttempt(false);

            if (gameMode === 'timed') {
              setTimeLeft(timeLimit);
            }

            setTimeout(() => {
              if (inputRef.current) {
                inputRef.current.focus();
              }
            }, 100);
          };

          useEffect(() => {
            let interval;
            if (isActive && gameMode === 'timed' && timeLeft > 0) {
              interval = setInterval(() => {
                setTimeLeft(time => {
                  if (time <= 1) {
                    endGame();
                    return 0;
                  }
                  return time - 1;
                });
              }, 1000);
            }
            return () => clearInterval(interval);
          }, [isActive, timeLeft, gameMode]);

          const handleInput = (e) => {
            if (!isActive || cheatAttempt) return;

            const value = e.target.value;
            const newIndex = value.length;

            // Check for paste attempt
            if (value.length > userInput.length + 1) {
              setCheatAttempt(true);
              setIsActive(false);
              return;
            }

            setUserInput(value);
            setCurrentIndex(newIndex);

            // Check if sentence is completed
            if (value === currentText) {
              const correctChars = currentText.length;
              setTotalCorrectChars(prev => prev + correctChars);
              setSentencesCompleted(prev => prev + 1);

              // Load new sentence
              const newText = getRandomText();
              setCurrentText(newText);
              setUserInput('');
              setCurrentIndex(0);
            }
          };

          const endGame = () => {
            if (!isActive) return;

            setIsActive(false);
            const endTime = Date.now();
            setEndTime(endTime);

            const timeElapsed = (endTime - startTime) / 1000 / 60; // minutes
            const correctChars = totalCorrectChars + userInput.split('').filter((char, i) => char === currentText[i]).length;
            const totalChars = totalCorrectChars + userInput.length;
            const errors = totalErrors + userInput.split('').filter((char, i) => char !== currentText[i]).length;
            const wordsTyped = correctChars / 5; // Standard: 5 characters = 1 word
            const wpm = Math.round(wordsTyped / timeElapsed);
            const accuracy = totalChars > 0 ? Math.round(((correctChars - errors) / totalChars) * 100) : 0;

            const finalStats = {
              wpm: isNaN(wpm) ? 0 : wpm,
              accuracy: accuracy < 0 ? 0 : accuracy,
              errors,
              correctChars,
              totalChars,
              timeElapsed: Math.round(timeElapsed * 60)
            };

            setStats(finalStats);

            // Update all-time stats
            const newStats = {
              gamesPlayed: allTimeStats.gamesPlayed + 1,
              totalWPM: allTimeStats.totalWPM + finalStats.wpm,
              bestWPM: Math.max(allTimeStats.bestWPM, finalStats.wpm),
              totalAccuracy: allTimeStats.totalAccuracy + finalStats.accuracy,
              bestAccuracy: Math.max(allTimeStats.bestAccuracy, finalStats.accuracy),
              totalTime: allTimeStats.totalTime + finalStats.timeElapsed
            };
            setAllTimeStats(newStats);
            localStorage.setItem('typingStats', JSON.stringify(newStats));

            // Save to leaderboard
            const leaderboard = JSON.parse(localStorage.getItem('typingLeaderboard') || '[]');
            leaderboard.push({
              username: username || 'Anonymous',
              wpm: finalStats.wpm,
              accuracy: finalStats.accuracy,
              difficulty,
              mode: gameMode,
              date: new Date().toISOString()
            });
            leaderboard.sort((a, b) => b.wpm - a.wpm);
            localStorage.setItem('typingLeaderboard', JSON.stringify(leaderboard.slice(0, 50)));

            setMode('results');
          };

          const resetGame = () => {
            setMode('menu');
            setUserInput('');
            setCurrentText('');
            setIsActive(false);
            setStartTime(null);
            setEndTime(null);
            setCurrentIndex(0);
            setSentencesCompleted(0);
            setTotalCorrectChars(0);
            setTotalErrors(0);
            setCheatAttempt(false);
          };

          const renderMenu = () => (
            <div className="min-h-screen bg-gradient-to-br from-[#1e3a5f] via-[#2d5f8d] to-[#0a1128] py-12 px-4">
              <div className="max-w-4xl mx-auto">
                <div className="text-center mb-12">
                  <div className="inline-block bg-white rounded-full p-6 mb-6 shadow-2xl">
                    <img
                      src="https://raw.githubusercontent.com/letustec-oss/LetUsTech/main/LetUsTech.png"
                      alt="LetUsTech"
                      className="h-20 w-20 object-contain"
                    />
                  </div>
                  <h1 className="text-5xl font-bold text-white mb-4">Speed Typing Challenge</h1>
                  <p className="text-xl text-white/80">Test your typing speed and accuracy!</p>
                  <p className="text-sm text-white/60 italic mt-2">Wired For Your World</p>
                </div>

                <div className="bg-white rounded-xl shadow-2xl p-8 mb-8">
                  <div className="mb-8">
                    <label className="block text-gray-700 font-bold mb-2">Your Name</label>
                    <input
                      type="text"
                      value={username}
                      onChange={(e) => {
                        const newName = e.target.value;
                        setUsername(newName);
                        localStorage.setItem('typingUsername', newName);
                      }}
                      placeholder="Enter your name"
                      maxLength={20}
                      className="w-full p-3 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                    />
                  </div>

                  <div className="mb-8">
                    <label className="block text-gray-700 font-bold mb-2">Game Mode</label>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                      <button
                        onClick={() => setGameMode('timed')}
                        className={`p-4 rounded-lg border-2 transition-all ${
                          gameMode === 'timed'
                            ? 'border-[#1e3a5f] bg-[#1e3a5f] text-white'
                            : 'border-gray-300 hover:border-[#1e3a5f]'
                        }`}
                      >
                        <Clock className="h-6 w-6 mx-auto mb-2" />
                        <div className="font-bold">Timed</div>
                        <div className="text-sm opacity-80">Race against time</div>
                      </button>
                      <button
                        onClick={() => setGameMode('words')}
                        className={`p-4 rounded-lg border-2 transition-all ${
                          gameMode === 'words'
                            ? 'border-[#1e3a5f] bg-[#1e3a5f] text-white'
                            : 'border-gray-300 hover:border-[#1e3a5f]'
                        }`}
                      >
                        <Target className="h-6 w-6 mx-auto mb-2" />
                        <div className="font-bold">Words</div>
                        <div className="text-sm opacity-80">Set word count</div>
                      </button>
                      <button
                        onClick={() => setGameMode('zen')}
                        className={`p-4 rounded-lg border-2 transition-all ${
                          gameMode === 'zen'
                            ? 'border-[#1e3a5f] bg-[#1e3a5f] text-white'
                            : 'border-gray-300 hover:border-[#1e3a5f]'
                        }`}
                      >
                        <Zap className="h-6 w-6 mx-auto mb-2" />
                        <div className="font-bold">Zen</div>
                        <div className="text-sm opacity-80">Practice mode</div>
                      </button>
                    </div>
                  </div>

                  {gameMode === 'timed' && (
                    <div className="mb-8">
                      <label className="block text-gray-700 font-bold mb-2">Time Limit</label>
                      <div className="grid grid-cols-4 gap-3">
                        {[15, 30, 60, 120].map(time => (
                          <button
                            key={time}
                            onClick={() => setTimeLimit(time)}
                            className={`p-3 rounded-lg border-2 transition-all ${
                              timeLimit === time
                                ? 'border-[#1e3a5f] bg-[#1e3a5f] text-white'
                                : 'border-gray-300 hover:border-[#1e3a5f]'
                            }`}
                          >
                            {time}s
                          </button>
                        ))}
                      </div>
                    </div>
                  )}

                  <div className="mb-8">
                    <label className="block text-gray-700 font-bold mb-2">Difficulty</label>
                    <div className="grid grid-cols-3 gap-4">
                      {['easy', 'medium', 'hard'].map(diff => (
                        <button
                          key={diff}
                          onClick={() => setDifficulty(diff)}
                          className={`p-4 rounded-lg border-2 transition-all capitalize ${
                            difficulty === diff
                              ? 'border-[#1e3a5f] bg-[#1e3a5f] text-white'
                              : 'border-gray-300 hover:border-[#1e3a5f]'
                          }`}
                        >
                          {diff}
                        </button>
                      ))}
                    </div>
                  </div>

                  <button
                    onClick={startGame}
                    className="w-full bg-[#1e3a5f] hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-lg text-xl transition-all transform hover:scale-105"
                  >
                    Start Game
                  </button>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <button
                    onClick={() => setMode('leaderboard')}
                    className="bg-white hover:bg-gray-50 text-gray-800 font-bold py-4 px-6 rounded-lg transition-all flex items-center justify-center gap-2"
                  >
                    <Trophy className="h-5 w-5" />
                    Leaderboard
                  </button>
                  <button
                    onClick={() => {
                      if (window.confirm('Are you sure you want to reset all stats? This cannot be undone.')) {
                        localStorage.removeItem('typingStats');
                        localStorage.removeItem('typingLeaderboard');
                        setAllTimeStats({
                          gamesPlayed: 0,
                          totalWPM: 0,
                          bestWPM: 0,
                          totalAccuracy: 0,
                          bestAccuracy: 0,
                          totalTime: 0
                        });
                      }
                    }}
                    className="bg-white hover:bg-gray-50 text-gray-800 font-bold py-4 px-6 rounded-lg transition-all flex items-center justify-center gap-2"
                  >
                    <Settings className="h-5 w-5" />
                    Reset Stats
                  </button>
                </div>

                {allTimeStats.gamesPlayed > 0 && (
                  <div className="mt-8 bg-white rounded-xl shadow-2xl p-6">
                    <h3 className="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                      <BarChart3 className="h-6 w-6" />
                      Your Statistics
                    </h3>
                    <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                      <div className="text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg">
                        <div className="text-3xl font-bold text-[#1e3a5f]">{allTimeStats.gamesPlayed}</div>
                        <div className="text-sm text-gray-600">Games Played</div>
                      </div>
                      <div className="text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg">
                        <div className="text-3xl font-bold text-green-600">{allTimeStats.bestWPM}</div>
                        <div className="text-sm text-gray-600">Best WPM</div>
                      </div>
                      <div className="text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg">
                        <div className="text-3xl font-bold text-purple-600">{allTimeStats.bestAccuracy}%</div>
                        <div className="text-sm text-gray-600">Best Accuracy</div>
                      </div>
                      <div className="text-center p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg">
                        <div className="text-3xl font-bold text-yellow-600">
                          {allTimeStats.gamesPlayed > 0 ? Math.round(allTimeStats.totalWPM / allTimeStats.gamesPlayed) : 0}
                        </div>
                        <div className="text-sm text-gray-600">Average WPM</div>
                      </div>
                      <div className="text-center p-4 bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg">
                        <div className="text-3xl font-bold text-pink-600">
                          {allTimeStats.gamesPlayed > 0 ? Math.round(allTimeStats.totalAccuracy / allTimeStats.gamesPlayed) : 0}%
                        </div>
                        <div className="text-sm text-gray-600">Avg Accuracy</div>
                      </div>
                      <div className="text-center p-4 bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-lg">
                        <div className="text-3xl font-bold text-indigo-600">
                          {Math.round(allTimeStats.totalTime / 60)}m
                        </div>
                        <div className="text-sm text-gray-600">Total Time</div>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          );

          const renderGame = () => (
            <div className="min-h-screen bg-gradient-to-br from-[#1e3a5f] via-[#2d5f8d] to-[#0a1128] py-12 px-4">
              <div className="max-w-4xl mx-auto">
                {cheatAttempt && (
                  <div className="bg-red-500 text-white p-4 rounded-lg mb-6 text-center">
                    <p className="font-bold text-xl">Cheating Detected!</p>
                    <p>Please type manually without copy-pasting.</p>
                    <button
                      onClick={resetGame}
                      className="mt-4 bg-white text-red-500 font-bold py-2 px-6 rounded-lg hover:bg-gray-100"
                    >
                      Try Again
                    </button>
                  </div>
                )}

                <div className="bg-white rounded-xl shadow-2xl p-8">
                  <div className="flex justify-between items-center mb-6">
                    <div className="flex gap-6">
                      {gameMode === 'timed' && (
                        <div className="flex items-center gap-2">
                          <Clock className="h-5 w-5 text-[#1e3a5f]" />
                          <span className="text-2xl font-bold text-[#1e3a5f]">{timeLeft}s</span>
                        </div>
                      )}
                      <div className="flex items-center gap-2">
                        <Target className="h-5 w-5 text-green-600" />
                        <span className="text-2xl font-bold text-green-600">{sentencesCompleted}</span>
                      </div>
                    </div>
                    <button
                      onClick={endGame}
                      className="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-lg transition-colors"
                    >
                      End Game
                    </button>
                  </div>

                  <div className="mb-6 p-6 bg-gray-50 rounded-lg font-mono text-2xl leading-relaxed">
                    {currentText.split('').map((char, index) => {
                      let className = 'transition-colors';
                      if (index < currentIndex) {
                        className += userInput[index] === char ? ' text-green-600 bg-green-100' : ' text-red-600 bg-red-100';
                      } else if (index === currentIndex) {
                        className += ' border-b-4 border-[#1e3a5f] bg-blue-50';
                      }
                      return (
                        <span key={index} className={className}>
                          {char}
                        </span>
                      );
                    })}
                  </div>

                  <input
                    ref={inputRef}
                    type="text"
                    value={userInput}
                    onChange={handleInput}
                    disabled={!isActive || cheatAttempt}
                    className="w-full p-4 text-xl border-2 border-[#1e3a5f] rounded-lg focus:outline-none focus:border-indigo-600 font-mono disabled:bg-gray-100"
                    placeholder="Start typing..."
                    autoComplete="off"
                    autoCorrect="off"
                    autoCapitalize="off"
                    spellCheck="false"
                  />

                  <div className="mt-6 grid grid-cols-3 gap-4">
                    <div className="text-center p-4 bg-blue-50 rounded-lg">
                      <div className="text-sm text-gray-600 mb-1">Difficulty</div>
                      <div className="text-xl font-bold text-[#1e3a5f] capitalize">{difficulty}</div>
                    </div>
                    <div className="text-center p-4 bg-green-50 rounded-lg">
                      <div className="text-sm text-gray-600 mb-1">Mode</div>
                      <div className="text-xl font-bold text-green-600 capitalize">{gameMode}</div>
                    </div>
                    <div className="text-center p-4 bg-purple-50 rounded-lg">
                      <div className="text-sm text-gray-600 mb-1">Correct</div>
                      <div className="text-xl font-bold text-purple-600">
                        {userInput.split('').filter((char, i) => char === currentText[i]).length}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          );

          const renderResults = () => (
            <div className="min-h-screen bg-gradient-to-br from-[#1e3a5f] via-[#2d5f8d] to-[#0a1128] py-12 px-4">
              <div className="max-w-4xl mx-auto">
                <div className="bg-white rounded-xl shadow-2xl p-8">
                  <div className="text-center mb-8">
                    <Trophy className="h-16 w-16 mx-auto text-yellow-500 mb-4" />
                    <h2 className="text-4xl font-bold text-gray-800 mb-2">Game Complete!</h2>
                    <p className="text-gray-600">Here are your results</p>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div className="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl">
                      <div className="flex items-center gap-3 mb-2">
                        <Zap className="h-6 w-6" />
                        <div className="text-sm opacity-90">Words Per Minute</div>
                      </div>
                      <div className="text-5xl font-bold">{stats.wpm}</div>
                      {stats.wpm >= allTimeStats.bestWPM && allTimeStats.gamesPlayed > 1 && (
                        <div className="mt-2 flex items-center gap-1 text-sm">
                          <TrendingUp className="h-4 w-4" />
                          New Personal Best!
                        </div>
                      )}
                    </div>

                    <div className="bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl">
                      <div className="flex items-center gap-3 mb-2">
                        <Target className="h-6 w-6" />
                        <div className="text-sm opacity-90">Accuracy</div>
                      </div>
                      <div className="text-5xl font-bold">{stats.accuracy}%</div>
                      {stats.accuracy >= allTimeStats.bestAccuracy && allTimeStats.gamesPlayed > 1 && (
                        <div className="mt-2 flex items-center gap-1 text-sm">
                          <TrendingUp className="h-4 w-4" />
                          New Personal Best!
                        </div>
                      )}
                    </div>

                    <div className="bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-xl">
                      <div className="flex items-center gap-3 mb-2">
                        <Award className="h-6 w-6" />
                        <div className="text-sm opacity-90">Correct Characters</div>
                      </div>
                      <div className="text-5xl font-bold">{stats.correctChars}</div>
                    </div>

                    <div className="bg-gradient-to-br from-red-500 to-red-600 text-white p-6 rounded-xl">
                      <div className="flex items-center gap-3 mb-2">
                        <Target className="h-6 w-6" />
                        <div className="text-sm opacity-90">Errors</div>
                      </div>
                      <div className="text-5xl font-bold">{stats.errors}</div>
                    </div>
                  </div>

                  <div className="bg-gray-50 rounded-xl p-6 mb-8">
                    <h3 className="font-bold text-gray-800 mb-4">Game Details</h3>
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                      <div>
                        <div className="text-gray-600">Difficulty</div>
                        <div className="font-bold capitalize">{difficulty}</div>
                      </div>
                      <div>
                        <div className="text-gray-600">Mode</div>
                        <div className="font-bold capitalize">{gameMode}</div>
                      </div>
                      <div>
                        <div className="text-gray-600">Time</div>
                        <div className="font-bold">{stats.timeElapsed}s</div>
                      </div>
                      <div>
                        <div className="text-gray-600">Sentences</div>
                        <div className="font-bold">{sentencesCompleted}</div>
                      </div>
                    </div>
                  </div>

                  <div className="flex gap-4">
                    <button
                      onClick={startGame}
                      className="flex-1 bg-[#1e3a5f] hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors"
                    >
                      Play Again
                    </button>
                    <button
                      onClick={() => setMode('leaderboard')}
                      className="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
                    >
                      <Trophy className="h-5 w-5" />
                      Leaderboard
                    </button>
                    <button
                      onClick={resetGame}
                      className="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-6 rounded-lg transition-colors"
                    >
                      Menu
                    </button>
                  </div>
                </div>
              </div>
            </div>
          );

          const renderLeaderboard = () => {
            const leaderboard = JSON.parse(localStorage.getItem('typingLeaderboard') || '[]');
            const topScores = leaderboard.slice(0, 10);

            return (
              <div className="min-h-screen bg-gradient-to-br from-[#1e3a5f] via-[#2d5f8d] to-[#0a1128] py-12 px-4">
                <div className="max-w-4xl mx-auto">
                  <div className="bg-white rounded-xl shadow-2xl p-8">
                    <div className="text-center mb-8">
                      <Trophy className="h-16 w-16 mx-auto text-yellow-500 mb-4" />
                      <h2 className="text-4xl font-bold text-gray-800 mb-2">Leaderboard</h2>
                      <p className="text-gray-600">Top 10 performances</p>
                    </div>

                    {topScores.length === 0 ? (
                      <div className="text-center py-12">
                        <p className="text-gray-500 text-lg mb-4">No scores yet!</p>
                        <button
                          onClick={startGame}
                          className="bg-[#1e3a5f] hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors"
                        >
                          Play Your First Game
                        </button>
                      </div>
                    ) : (
                      <div className="space-y-3">
                        {topScores.map((entry, index) => (
                          <div
                            key={index}
                            className={`flex items-center justify-between p-4 rounded-lg border-2 ${
                              index === 0 ? 'border-yellow-400 bg-yellow-50' :
                              index === 1 ? 'border-gray-400 bg-gray-50' :
                              index === 2 ? 'border-orange-400 bg-orange-50' :
                              'border-gray-200 bg-white'
                            }`}
                          >
                            <div className="flex items-center gap-4">
                              <div className={`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ${
                                index === 0 ? 'bg-yellow-500' :
                                index === 1 ? 'bg-gray-400' :
                                index === 2 ? 'bg-orange-500' :
                                'bg-[#1e3a5f]'
                              }`}>
                                #{index + 1}
                              </div>
                              <div>
                                <div className="font-bold text-gray-800 text-lg">
                                  {entry.username || 'Anonymous'} - {entry.wpm} WPM
                                </div>
                                <div className="text-sm text-gray-600">
                                  {entry.accuracy}% accuracy • {entry.difficulty} • {entry.mode}
                                </div>
                              </div>
                            </div>
                            <div className="text-sm text-gray-500">
                              {new Date(entry.date).toLocaleDateString()}
                            </div>
                          </div>
                        ))}
                      </div>
                    )}

                    <button
                      onClick={() => setMode('menu')}
                      className="w-full mt-8 bg-[#1e3a5f] hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors"
                    >
                      Back to Menu
                    </button>
                  </div>
                </div>
              </div>
            );
          };

          const renderHeader = () => (
            <header className="nav-header text-white shadow-lg">
              <div className="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
                <div className="flex items-center gap-2">
                  <div className="h-8 w-8 bg-white rounded flex items-center justify-center p-1.5">
                    <img
                      src="https://raw.githubusercontent.com/letustec-oss/LetUsTech/main/LetUsTech.png"
                      alt="LetUsTech"
                      className="max-h-full max-w-full object-contain"
                    />
                  </div>
                  <span className="text-white font-semibold text-lg hidden sm:inline">LetUsTech</span>
                </div>

                <nav className="hidden md:flex items-center gap-6">
                  <a href="../index.html#about" className="nav-link text-sm font-medium">About</a>
                  <a href="../index.html#programs" className="nav-link text-sm font-medium">Programs</a>
                  <a href="../index.html#games" className="nav-link text-sm font-medium">Games</a>
                  <a href="../blog/blog.html" className="nav-link text-sm font-medium">Blog</a>
                  <a href="../index.html#faq" className="nav-link text-sm font-medium">FAQ</a>
                  <a href="../index.html#contact" className="nav-link text-sm font-medium">Contact</a>
                  <a href="../index.html#donate" className="donate-btn text-white text-sm font-medium px-4 py-2 rounded">
                    ❤️ Donate
                  </a>
                </nav>

                <a href="../index.html#donate" className="donate-btn md:hidden text-white text-sm font-medium px-3 py-1.5 rounded">
                  ❤️ Donate
                </a>
              </div>
            </header>
          );

          const renderUsernamePrompt = () => {
            const [tempUsername, setTempUsername] = React.useState('');

            return (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div className="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4">
                  <h2 className="text-2xl font-bold text-gray-800 mb-4">Enter Your Name</h2>
                  <p className="text-gray-600 mb-6">Please enter your name to appear on the leaderboard!</p>
                  <input
                    type="text"
                    value={tempUsername}
                    onChange={(e) => setTempUsername(e.target.value)}
                    onKeyPress={(e) => {
                      if (e.key === 'Enter' && tempUsername.trim()) {
                        saveUsername(tempUsername);
                      }
                    }}
                    placeholder="Your name"
                    maxLength={20}
                    autoFocus
                    className="w-full p-3 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 focus:outline-none mb-4"
                  />
                  <div className="flex gap-3">
                    <button
                      onClick={() => {
                        if (tempUsername.trim()) {
                          saveUsername(tempUsername);
                        }
                      }}
                      disabled={!tempUsername.trim()}
                      className="flex-1 bg-[#1e3a5f] hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-colors"
                    >
                      Start Game
                    </button>
                    <button
                      onClick={() => setShowUsernamePrompt(false)}
                      className="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-6 rounded-lg transition-colors"
                    >
                      Cancel
                    </button>
                  </div>
                </div>
              </div>
            );
          };

          return (
            <div>
              {renderHeader()}
                    {/* Loading Screen */}
                    {isLoading && (
                        <div className="fixed inset-0 bg-gradient-to-br from-[#1e3a5f] via-[#2d5f8d] to-[#0a1128] z-50 flex items-center justify-center">
                            <div className="text-center">
                                <div className="mb-4 animate-bounce">
                                    <div className="h-40 w-40 mx-auto bg-white rounded-2xl shadow-2xl p-4 flex items-center justify-center">
                                        <img
                                            src="https://raw.githubusercontent.com/letustec-oss/LetUsTech/main/LetUsTech.png"
                                            alt="LetUsTech Logo"
                                            className="max-h-full max-w-full object-contain"
                                        />
                                    </div>
                                </div>
                                <h1 className="text-5xl font-bold text-white mb-2">LetUsTech</h1>
                                <p className="text-xl text-white/80 mb-1">Speed Typing Challenge</p>
                                <p className="text-sm text-white/60 italic mb-4">Wired For Your World</p>
                                <div className="flex justify-center gap-2">
                                    <div className="w-3 h-3 bg-white rounded-full animate-pulse"></div>
                                    <div className="w-3 h-3 bg-white rounded-full animate-pulse" style={{animationDelay: '0.2s'}}></div>
                                    <div className="w-3 h-3 bg-white rounded-full animate-pulse" style={{animationDelay: '0.4s'}}></div>
                                </div>
                                <p className="text-white/60 text-sm mt-4">Loading your adventure...</p>
                            </div>
                        </div>
                    )}


              {showUsernamePrompt && renderUsernamePrompt()}
              {mode === 'menu' && renderMenu()}
              {mode === 'game' && renderGame()}
              {mode === 'results' && renderResults()}
              {mode === 'leaderboard' && renderLeaderboard()}
            </div>
          );
        };

                ReactDOM.render(<TypingChallenge />, document.getElementById('root'));
    </script>
</body>
</html>