<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Math Quest Game by LetUsTech - Wired For Your World. Test your math skills, earn coins, and unlock levels!">
    <title>Math Quest - LetUsTech | Wired For Your World</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5830581574523106"
            crossorigin="anonymous"></script>
    
    <style>
        /* Custom animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes bounce {
            0%, 100% {
                transform: translateY(-25%);
                animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
            }
            50% {
                transform: translateY(0);
                animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
            }
        }
        .animate-bounce {
            animation: bounce 1s infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // Access React hooks from the global React object
        const { useState, useEffect, useRef } = React;
        
        // Simple icon components as replacements for lucide-react
        const Icon = ({ children, size = 20, className = "" }) => (
            <span className={className} style={{ fontSize: size + 'px', display: 'inline-block' }}>
                {children}
            </span>
        );
        
        const Trophy = ({ size, className }) => <Icon size={size} className={className}>🏆</Icon>;
        const Star = ({ size, className }) => <Icon size={size} className={className}>⭐</Icon>;
        const Zap = ({ size, className }) => <Icon size={size} className={className}>⚡</Icon>;
        const Heart = ({ size, className }) => <Icon size={size} className={className}>❤️</Icon>;
        const Brain = ({ size, className }) => <Icon size={size} className={className}>🧠</Icon>;
        const Clock = ({ size, className }) => <Icon size={size} className={className}>⏰</Icon>;
        const ShoppingBag = ({ size, className }) => <Icon size={size} className={className}>🛍️</Icon>;
        const ArrowLeft = ({ size, className }) => <Icon size={size} className={className}>←</Icon>;
        const X = ({ size, className }) => <Icon size={size} className={className}>✕</Icon>;
        const Play = ({ size, className }) => <Icon size={size} className={className}>▶️</Icon>;
        const Gift = ({ size, className }) => <Icon size={size} className={className}>🎁</Icon>;
        const Volume2 = ({ size, className }) => <Icon size={size} className={className}>🔊</Icon>;
        const VolumeX = ({ size, className }) => <Icon size={size} className={className}>🔇</Icon>;

        // AdSense Component
        function AdSenseAd({ slot, format = "auto", style = {} }) {
            useEffect(() => {
                try {
                    if (typeof window !== 'undefined' && window.adsbygoogle) {
                        (window.adsbygoogle = window.adsbygoogle || []).push({});
                    }
                } catch (err) {
                    console.log('AdSense error:', err);
                }
            }, []);

            return (
                <div className="adsense-container">
                    <ins className="adsbygoogle"
                         style={{ display: 'block', ...style }}
                         data-ad-client="ca-pub-5830581574523106"
                         data-ad-slot={slot}
                         data-ad-format={format}
                         data-full-width-responsive="true">
                    </ins>
                </div>
            );
        }

        function MathGame() {
            const [screen, setScreen] = useState('menu');
            const [isLoading, setIsLoading] = useState(true);
            const [level, setLevel] = useState(1);
            const [unlockedLevels, setUnlockedLevels] = useState(1);
            const [coins, setCoins] = useState(0);
            const [score, setScore] = useState(0);
            const [lives, setLives] = useState(3);
            const [timeLeft, setTimeLeft] = useState(30);
            const [question, setQuestion] = useState(null);
            const [answer, setAnswer] = useState('');
            const [streak, setStreak] = useState(0);
            const [bestStreak, setBestStreak] = useState(0);
            const [totalGamesPlayed, setTotalGamesPlayed] = useState(0);
            const [totalCorrectAnswers, setTotalCorrectAnswers] = useState(0);
            const [comboMultiplier, setComboMultiplier] = useState(1);
            const [showComboAnimation, setShowComboAnimation] = useState(false);
            const [dailyStreak, setDailyStreak] = useState(0);
            const [lastPlayedDate, setLastPlayedDate] = useState(null);
            const [powerUps, setPowerUps] = useState({
                timeFreeze: 0,
                extraLife: 0,
                doublePoints: 0,
                skipQuestion: 0
            });
            const [activePowerUps, setActivePowerUps] = useState({
                doublePoints: false
            });
            const [achievements, setAchievements] = useState({
                firstWin: false,
                streakMaster: false,
                shopaholic: false,
                mathematician: false,
                survivor: false
            });
            
            // Ad system
            const [showAd, setShowAd] = useState(false);
            const [adType, setAdType] = useState(null);
            const [adTimeLeft, setAdTimeLeft] = useState(5);
            const [canWatchAd, setCanWatchAd] = useState(true);
            const [lastAdWatched, setLastAdWatched] = useState(null);
            const [adRewardType, setAdRewardType] = useState(null);
            const [totalAdsWatched, setTotalAdsWatched] = useState(0);
            const [showBannerAd, setShowBannerAd] = useState(true);
            const [showSideAd, setShowSideAd] = useState(true);
            const [adMuted, setAdMuted] = useState(false);
            const [gamesPlayedSinceAd, setGamesPlayedSinceAd] = useState(0);
            
            // Anti-cheat measures
            const [gameStartTime, setGameStartTime] = useState(null);
            const [answerTimes, setAnswerTimes] = useState([]);
            const [tabSwitches, setTabSwitches] = useState(0);
            const questionGeneratedTime = useRef(null);
            const [isCheating, setIsCheating] = useState(false);

            // Mock ad content for fallback
            const bannerAds = [
                { text: "🎮 Play More Games at GameHub!", color: "from-blue-400 to-purple-500" },
                { text: "🍔 Hungry? Order Food Now - 30% OFF!", color: "from-orange-400 to-red-500" },
                { text: "📱 New Phone Deals - Save Big Today!", color: "from-green-400 to-blue-500" },
                { text: "🎵 Premium Music - First Month Free!", color: "from-pink-400 to-purple-500" },
                { text: "🏃 Fitness App - Transform Your Life!", color: "from-yellow-400 to-orange-500" }
            ];
            
            const [currentBannerAd, setCurrentBannerAd] = useState(0);
            const [currentSideAd, setCurrentSideAd] = useState(1);
            
            // Set favicon and page title
            useEffect(() => {
                // Set page title
                document.title = 'Math Quest - LetUsTech | Wired For Your World';
                
                // Set favicon from GitHub repository
                const link = document.querySelector("link[rel*='icon']") || document.createElement('link');
                link.type = 'image/png';
                link.rel = 'shortcut icon';
                link.href = 'https://raw.githubusercontent.com/letustec-oss/LetUsTech/main/Favicon.png';
                document.getElementsByTagName('head')[0].appendChild(link);
                
                // Remove loading screen after a short delay
                setTimeout(() => {
                    setIsLoading(false);
                }, 1500);
            }, []);

            // Rotate banner ads
            useEffect(() => {
                const interval = setInterval(() => {
                    setCurrentBannerAd((prev) => (prev + 1) % bannerAds.length);
                    setCurrentSideAd((prev) => (prev + 1) % bannerAds.length);
                }, 8000);
                return () => clearInterval(interval);
            }, [bannerAds.length]);

            // Show interstitial ad after every 3 games
            useEffect(() => {
                if (gamesPlayedSinceAd >= 3 && screen === 'gameOver') {
                    showInterstitialAd();
                    setGamesPlayedSinceAd(0);
                }
            }, [gamesPlayedSinceAd, screen]);

            // Anti-cheat: Detect tab visibility changes
            useEffect(() => {
                const handleVisibilityChange = () => {
                    if (document.hidden && screen === 'game') {
                        setTabSwitches(prev => prev + 1);
                        if (tabSwitches >= 2) {
                            setIsCheating(true);
                            endGame();
                        }
                    }
                };

                document.addEventListener('visibilitychange', handleVisibilityChange);
                return () => document.removeEventListener('visibilitychange', handleVisibilityChange);
            }, [screen, tabSwitches]);

            // Anti-cheat: Disable right-click and common shortcuts
            useEffect(() => {
                const preventCheat = (e) => {
                    if (screen === 'game') {
                        if (e.type === 'contextmenu') {
                            e.preventDefault();
                        }
                        if (e.ctrlKey && (e.key === 'c' || e.key === 'v' || e.key === 'u' || e.key === 'i')) {
                            e.preventDefault();
                        }
                        if (e.key === 'F12') {
                            e.preventDefault();
                        }
                    }
                };

                document.addEventListener('contextmenu', preventCheat);
                document.addEventListener('keydown', preventCheat);
                
                return () => {
                    document.removeEventListener('contextmenu', preventCheat);
                    document.removeEventListener('keydown', preventCheat);
                };
            }, [screen]);

            // Ad countdown timer
            useEffect(() => {
                if (showAd && adTimeLeft > 0) {
                    const timer = setTimeout(() => setAdTimeLeft(adTimeLeft - 1), 1000);
                    return () => clearTimeout(timer);
                }
            }, [showAd, adTimeLeft]);

            useEffect(() => {
                if (screen === 'game' && timeLeft > 0 && lives > 0) {
                    const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);
                    return () => clearTimeout(timer);
                } else if (screen === 'game' && (timeLeft === 0 || lives === 0)) {
                    endGame();
                }
            }, [timeLeft, screen, lives]);

            useEffect(() => {
                if (screen === 'game' && !question) {
                    generateQuestion();
                }
            }, [screen, question]);

            const generateQuestion = () => {
                const difficulty = Math.min(level, 10);
                const operations = ['+', '-', '*'];
                const op = operations[Math.floor(Math.random() * operations.length)];
                
                let num1, num2, correctAnswer;
                
                if (op === '+') {
                    num1 = Math.floor(Math.random() * (10 * difficulty)) + 1;
                    num2 = Math.floor(Math.random() * (10 * difficulty)) + 1;
                    correctAnswer = num1 + num2;
                } else if (op === '-') {
                    num1 = Math.floor(Math.random() * (10 * difficulty)) + 10;
                    num2 = Math.floor(Math.random() * num1) + 1;
                    correctAnswer = num1 - num2;
                } else {
                    num1 = Math.floor(Math.random() * (5 * Math.min(difficulty, 5))) + 1;
                    num2 = Math.floor(Math.random() * (5 * Math.min(difficulty, 5))) + 1;
                    correctAnswer = num1 * num2;
                }

                setQuestion({ num1, num2, op, correctAnswer });
                questionGeneratedTime.current = Date.now();
            };

            const checkAnswer = () => {
                if (answer === '') return;

                const timeTaken = Date.now() - questionGeneratedTime.current;
                if (timeTaken < 500) {
                    setIsCheating(true);
                    endGame();
                    return;
                }

                const isCorrect = parseInt(answer) === question.correctAnswer;
                
                if (isCorrect) {
                    setAnswerTimes(prev => [...prev, timeTaken]);
                    
                    const newStreak = streak + 1;
                    const newMultiplier = Math.min(Math.floor(newStreak / 3) + 1, 5);
                    setComboMultiplier(newMultiplier);
                    
                    if (newMultiplier > 1) {
                        setShowComboAnimation(true);
                        setTimeout(() => setShowComboAnimation(false), 1000);
                    }
                    
                    const basePoints = activePowerUps.doublePoints ? 20 : 10;
                    const points = basePoints * newMultiplier;
                    setScore(score + points);
                    setCoins(coins + (5 * newMultiplier));
                    setStreak(newStreak);
                    setTotalCorrectAnswers(totalCorrectAnswers + 1);
                    
                    if (newStreak > bestStreak) {
                        setBestStreak(newStreak);
                    }
                    
                    if (newStreak >= 5 && !achievements.streakMaster) {
                        setAchievements({...achievements, streakMaster: true});
                    }
                    
                    if (score + points >= 100 && !achievements.mathematician) {
                        setAchievements({...achievements, mathematician: true});
                    }
                } else {
                    setLives(lives - 1);
                    setStreak(0);
                    setComboMultiplier(1);
                }

                setAnswer('');
                setQuestion(null);
            };

            const showInterstitialAd = () => {
                setAdType('interstitial');
                setShowAd(true);
                setAdTimeLeft(5);
            };

            const showRewardedAd = (rewardType) => {
                if (!canWatchAd) {
                    alert("Please wait before watching another ad!");
                    return;
                }
                
                setAdType('rewarded');
                setAdRewardType(rewardType);
                setShowAd(true);
                setAdTimeLeft(10);
                setCanWatchAd(false);
                
                setTimeout(() => setCanWatchAd(true), 60000); // 1 minute cooldown
            };

            const closeAd = () => {
                if (adType === 'rewarded' && adTimeLeft === 0) {
                    // Give reward
                    if (adRewardType === 'coins') {
                        setCoins(coins + 25);
                    } else if (adRewardType === 'life') {
                        setLives(Math.min(lives + 1, 5));
                    } else if (adRewardType === 'powerup') {
                        const powerUpTypes = ['timeFreeze', 'extraLife', 'doublePoints', 'skipQuestion'];
                        const randomPowerUp = powerUpTypes[Math.floor(Math.random() * powerUpTypes.length)];
                        setPowerUps({...powerUps, [randomPowerUp]: powerUps[randomPowerUp] + 1});
                    }
                    
                    setTotalAdsWatched(totalAdsWatched + 1);
                }
                
                setShowAd(false);
                setAdType(null);
                setAdRewardType(null);
            };

            const startGame = () => {
                const today = new Date().toDateString();
                if (lastPlayedDate) {
                    const lastDate = new Date(lastPlayedDate);
                    const daysDiff = Math.floor((new Date(today) - lastDate) / (1000 * 60 * 60 * 24));
                    
                    if (daysDiff === 1) {
                        setDailyStreak(dailyStreak + 1);
                    } else if (daysDiff > 1) {
                        setDailyStreak(1);
                    }
                } else {
                    setDailyStreak(1);
                }
                setLastPlayedDate(today);
                
                setScreen('game');
                setScore(0);
                setLives(3);
                setTimeLeft(30);
                setStreak(0);
                setComboMultiplier(1);
                setActivePowerUps({ doublePoints: false });
                setGameStartTime(Date.now());
                setAnswerTimes([]);
                setTabSwitches(0);
                setIsCheating(false);
                setTotalGamesPlayed(totalGamesPlayed + 1);
                setGamesPlayedSinceAd(gamesPlayedSinceAd + 1);
            };

            const endGame = () => {
                if (score > 0 && !achievements.firstWin) {
                    setAchievements({...achievements, firstWin: true});
                }
                if (lives > 0 && !achievements.survivor) {
                    setAchievements({...achievements, survivor: true});
                }
                
                if (score >= 50 && level === unlockedLevels && unlockedLevels < 10) {
                    setUnlockedLevels(unlockedLevels + 1);
                }
                
                setScreen('gameOver');
            };

            const usePowerUp = (type) => {
                if (powerUps[type] <= 0) return;

                const newPowerUps = {...powerUps};
                newPowerUps[type]--;
                setPowerUps(newPowerUps);

                if (type === 'timeFreeze') {
                    setTimeLeft(timeLeft + 15);
                } else if (type === 'extraLife') {
                    setLives(lives + 1);
                } else if (type === 'doublePoints') {
                    setActivePowerUps({...activePowerUps, doublePoints: true});
                    setTimeout(() => setActivePowerUps({...activePowerUps, doublePoints: false}), 10000);
                } else if (type === 'skipQuestion') {
                    setQuestion(null);
                }
            };

            const buyPowerUp = (type, cost) => {
                if (coins >= cost) {
                    setCoins(coins - cost);
                    setPowerUps({...powerUps, [type]: powerUps[type] + 1});
                    
                    const totalPowerUps = Object.values(powerUps).reduce((a, b) => a + b, 0) + 1;
                    if (totalPowerUps >= 5 && !achievements.shopaholic) {
                        setAchievements({...achievements, shopaholic: true});
                    }
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-500 to-pink-500 p-4">
                    {/* Loading Screen */}
                    {isLoading && (
                        <div className="fixed inset-0 bg-gradient-to-br from-purple-600 to-pink-600 z-50 flex items-center justify-center">
                            <div className="text-center">
                                <div className="mb-4 animate-bounce">
                                    <img 
                                        src="https://raw.githubusercontent.com/letustec-oss/LetUsTech/main/LetUsTech.PNG" 
                                        alt="LetUsTech Logo"
                                        className="h-24 w-24 rounded-2xl shadow-2xl mx-auto"
                                    />
                                </div>
                                <h1 className="text-5xl font-bold text-white mb-2">LetUsTech</h1>
                                <p className="text-xl text-white/80 mb-1">Math Quest</p>
                                <p className="text-sm text-white/60 italic mb-4">Wired For Your World</p>
                                <div className="flex justify-center gap-2">
                                    <div className="w-3 h-3 bg-white rounded-full animate-pulse"></div>
                                    <div className="w-3 h-3 bg-white rounded-full animate-pulse" style={{animationDelay: '0.2s'}}></div>
                                    <div className="w-3 h-3 bg-white rounded-full animate-pulse" style={{animationDelay: '0.4s'}}></div>
                                </div>
                                <p className="text-white/60 text-sm mt-4">Loading your adventure...</p>
                            </div>
                        </div>
                    )}
                    
                    {/* Top Banner Ad */}
                    {showBannerAd && (
                        <div className="max-w-6xl mx-auto mb-4">
                            <div className={`bg-gradient-to-r ${bannerAds[currentBannerAd].color} p-3 rounded-lg shadow-lg relative group cursor-pointer hover:scale-105 transition-transform`}>
                                <div className="text-white text-center font-bold text-lg">
                                    {bannerAds[currentBannerAd].text}
                                </div>
                                <button
                                    onClick={() => setShowBannerAd(false)}
                                    className="absolute top-1 right-1 text-white/70 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity"
                                >
                                    <X size={16} />
                                </button>
                                <div className="absolute top-1 left-1 text-xs text-white/70">AD</div>
                            </div>
                        </div>
                    )}

                    {/* Top Navigation Header */}
                    <div className="max-w-6xl mx-auto mb-4">
                        <div className="bg-white rounded-lg shadow-lg p-4">
                            <div className="flex items-center justify-between">
                                <a href="index.html" className="flex items-center gap-3 hover:opacity-80 transition-opacity">
                                    <img 
                                        src="https://raw.githubusercontent.com/letustec-oss/LetUsTech/main/LetUsTech.PNG" 
                                        alt="LetUsTech Logo"
                                        className="h-10 w-10 rounded-lg"
                                    />
                                    <div>
                                        <h1 className="text-xl font-bold text-gray-800">LetUsTech</h1>
                                        <p className="text-xs text-gray-500 italic">Wired For Your World</p>
                                    </div>
                                </a>
                                
                                <nav className="flex items-center gap-6">
                                    <a href="index.html#about" className="text-gray-700 hover:text-purple-600 transition-colors font-medium">
                                        About
                                    </a>
                                    <a href="index.html#programs" className="text-gray-700 hover:text-purple-600 transition-colors font-medium">
                                        Programs
                                    </a>
                                    <a href="index.html#contact" className="text-gray-700 hover:text-purple-600 transition-colors font-medium">
                                        Contact
                                    </a>
                                    <a href="index.html#donate" className="text-purple-600 hover:text-purple-700 transition-colors font-medium flex items-center gap-1">
                                        💝 Donate
                                    </a>
                                </nav>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-4xl mx-auto relative">

                        {/* Header */}
                        <div className="bg-white rounded-lg shadow-lg p-4 mb-4 flex justify-between items-center">
                            <div className="flex items-center gap-4">
                                {screen !== 'menu' && (
                                    <button
                                        onClick={() => {
                                            if (screen === 'game') {
                                                const confirmQuit = window.confirm('Are you sure you want to quit? Your progress will be lost.');
                                                if (confirmQuit) {
                                                    setScreen('menu');
                                                }
                                            } else {
                                                setScreen('menu');
                                            }
                                        }}
                                        className="flex items-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700"
                                    >
                                        <ArrowLeft size={20} />
                                        Back
                                    </button>
                                )}
                                <div className="flex items-center gap-2">
                                    <Star className="text-yellow-500" />
                                    <span className="font-bold">Level {level}</span>
                                </div>
                                <div className="flex items-center gap-2">
                                    <Trophy className="text-yellow-600" />
                                    <span className="font-bold">{coins} Coins</span>
                                </div>
                            </div>
                            <button
                                onClick={() => setScreen('achievements')}
                                className="flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700"
                            >
                                <Trophy size={20} />
                                Achievements
                            </button>
                        </div>

                        {/* Menu Screen */}
                        {screen === 'menu' && (
                            <div className="bg-white rounded-lg shadow-2xl p-8 text-center">
                                <h1 className="text-5xl font-bold text-purple-600 mb-2">Math Quest</h1>
                                <p className="text-gray-600 mb-1">Test your math skills and earn coins!</p>
                                <p className="text-xs text-gray-500 italic mb-4">Powered by LetUsTech - Wired For Your World</p>
                                
                                {/* Watch Ad for Rewards Section */}
                                <div className="bg-gradient-to-r from-yellow-100 to-orange-100 border-2 border-orange-300 rounded-lg p-4 mb-4">
                                    <h3 className="font-bold text-orange-700 mb-2">🎬 Watch Ads for Rewards!</h3>
                                    <div className="grid grid-cols-3 gap-2">
                                        <button
                                            onClick={() => showRewardedAd('coins')}
                                            disabled={!canWatchAd}
                                            className="bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600 disabled:bg-gray-300 disabled:cursor-not-allowed flex flex-col items-center"
                                        >
                                            <Gift size={20} />
                                            <span className="text-xs">+25 Coins</span>
                                        </button>
                                        <button
                                            onClick={() => showRewardedAd('life')}
                                            disabled={!canWatchAd || screen !== 'game'}
                                            className="bg-red-500 text-white p-2 rounded hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed flex flex-col items-center"
                                        >
                                            <Heart size={20} />
                                            <span className="text-xs">+1 Life</span>
                                        </button>
                                        <button
                                            onClick={() => showRewardedAd('powerup')}
                                            disabled={!canWatchAd}
                                            className="bg-purple-500 text-white p-2 rounded hover:bg-purple-600 disabled:bg-gray-300 disabled:cursor-not-allowed flex flex-col items-center"
                                        >
                                            <Zap size={20} />
                                            <span className="text-xs">Random Power</span>
                                        </button>
                                    </div>
                                    {!canWatchAd && (
                                        <p className="text-xs text-orange-600 mt-2">Please wait before watching another ad</p>
                                    )}
                                </div>
                                
                                {/* Stats Display */}
                                <div className="grid grid-cols-3 gap-4 mb-6">
                                    <div className="bg-purple-50 p-3 rounded-lg">
                                        <p className="text-2xl font-bold text-purple-600">{totalGamesPlayed}</p>
                                        <p className="text-xs text-gray-600">Games Played</p>
                                    </div>
                                    <div className="bg-yellow-50 p-3 rounded-lg">
                                        <p className="text-2xl font-bold text-yellow-600">{bestStreak}</p>
                                        <p className="text-xs text-gray-600">Best Streak</p>
                                    </div>
                                    <div className="bg-green-50 p-3 rounded-lg">
                                        <p className="text-2xl font-bold text-green-600">{dailyStreak}</p>
                                        <p className="text-xs text-gray-600">Daily Streak 🔥</p>
                                    </div>
                                </div>
                                
                                <div className="space-y-4">
                                    <button
                                        onClick={startGame}
                                        className="w-full bg-purple-600 text-white py-4 rounded-lg text-xl font-bold hover:bg-purple-700 transition"
                                    >
                                        Start Game
                                    </button>
                                    <button
                                        onClick={() => setScreen('shop')}
                                        className="w-full bg-green-600 text-white py-4 rounded-lg text-xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2"
                                    >
                                        <ShoppingBag /> Shop
                                    </button>
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h3 className="font-bold mb-3">Level Selection</h3>
                                        <p className="text-sm text-gray-600 mb-3">Score 50+ points to unlock next level!</p>
                                        <div className="flex gap-2 justify-center flex-wrap">
                                            {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(l => (
                                                <button
                                                    key={l}
                                                    onClick={() => l <= unlockedLevels && setLevel(l)}
                                                    disabled={l > unlockedLevels}
                                                    className={`px-4 py-2 rounded transition ${
                                                        level === l 
                                                            ? 'bg-purple-600 text-white' 
                                                            : l <= unlockedLevels 
                                                                ? 'bg-gray-200 hover:bg-gray-300' 
                                                                : 'bg-gray-100 text-gray-400 cursor-not-allowed'
                                                    }`}
                                                    title={l > unlockedLevels ? '🔒 Locked' : ''}
                                                >
                                                    {l > unlockedLevels ? '🔒' : l}
                                                </button>
                                            ))}
                                        </div>
                                        <p className="text-xs text-gray-500 mt-2">Level {unlockedLevels} unlocked</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Game Screen */}
                        {screen === 'game' && question && (
                            <div className="bg-white rounded-lg shadow-2xl p-8">
                                <div className="flex justify-between mb-6">
                                    <div className="flex items-center gap-2 bg-red-50 border-2 border-red-300 px-4 py-2 rounded-lg">
                                        <Heart className="text-red-500" size={24} />
                                        <span className="font-bold text-xl text-red-600">{lives}</span>
                                        <span className="text-red-600 font-semibold">Lives</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <Clock className="text-blue-500" />
                                        <span className="font-bold">{timeLeft}s</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <Brain className="text-purple-500" />
                                        <span className="font-bold">Score: {score}</span>
                                    </div>
                                </div>

                                {/* In-game Ad for Extra Life */}
                                {lives === 1 && canWatchAd && (
                                    <div className="bg-red-50 border-2 border-red-300 rounded-lg p-3 mb-4 text-center">
                                        <p className="text-red-700 font-bold mb-2">⚠️ Low on Lives!</p>
                                        <button
                                            onClick={() => showRewardedAd('life')}
                                            className="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"
                                        >
                                            <Play className="inline mr-2" size={16} />
                                            Watch Ad for +1 Life
                                        </button>
                                    </div>
                                )}

                                {activePowerUps.doublePoints && (
                                    <div className="bg-yellow-100 border-2 border-yellow-400 rounded-lg p-2 mb-4 text-center">
                                        <Zap className="inline text-yellow-600" /> Double Points Active!
                                    </div>
                                )}

                                {showComboAnimation && comboMultiplier > 1 && (
                                    <div className="bg-gradient-to-r from-orange-400 to-red-500 text-white font-bold text-2xl p-3 rounded-lg mb-4 text-center animate-pulse">
                                        🔥 {comboMultiplier}x COMBO! 🔥
                                    </div>
                                )}

                                <div className="text-center mb-6">
                                    <div className="text-6xl font-bold text-purple-600 mb-4">
                                        {question.num1} {question.op} {question.num2} = ?
                                    </div>
                                    {streak > 0 && (
                                        <div className="mb-3">
                                            <span className="bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-sm font-bold">
                                                🔥 Streak: {streak} | Multiplier: x{comboMultiplier}
                                            </span>
                                        </div>
                                    )}
                                    <input
                                        type="number"
                                        value={answer}
                                        onChange={(e) => setAnswer(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && checkAnswer()}
                                        className="text-4xl text-center border-4 border-purple-300 rounded-lg p-4 w-48"
                                        placeholder="?"
                                        autoFocus
                                    />
                                </div>

                                <button
                                    onClick={checkAnswer}
                                    className="w-full bg-purple-600 text-white py-4 rounded-lg text-xl font-bold hover:bg-purple-700 transition mb-4"
                                >
                                    Submit Answer
                                </button>

                                <div className="grid grid-cols-4 gap-2">
                                    <button
                                        onClick={() => usePowerUp('timeFreeze')}
                                        disabled={powerUps.timeFreeze === 0}
                                        className="bg-blue-500 text-white p-2 rounded disabled:bg-gray-300 disabled:cursor-not-allowed flex flex-col items-center"
                                    >
                                        <Clock size={20} />
                                        <span className="text-xs">+15s ({powerUps.timeFreeze})</span>
                                    </button>
                                    <button
                                        onClick={() => usePowerUp('extraLife')}
                                        disabled={powerUps.extraLife === 0}
                                        className="bg-red-500 text-white p-2 rounded disabled:bg-gray-300 disabled:cursor-not-allowed flex flex-col items-center"
                                    >
                                        <Heart size={20} />
                                        <span className="text-xs">+1 Life ({powerUps.extraLife})</span>
                                    </button>
                                    <button
                                        onClick={() => usePowerUp('doublePoints')}
                                        disabled={powerUps.doublePoints === 0}
                                        className="bg-yellow-500 text-white p-2 rounded disabled:bg-gray-300 disabled:cursor-not-allowed flex flex-col items-center"
                                    >
                                        <Zap size={20} />
                                        <span className="text-xs">2x Points ({powerUps.doublePoints})</span>
                                    </button>
                                    <button
                                        onClick={() => usePowerUp('skipQuestion')}
                                        disabled={powerUps.skipQuestion === 0}
                                        className="bg-green-500 text-white p-2 rounded disabled:bg-gray-300 disabled:cursor-not-allowed flex flex-col items-center"
                                    >
                                        <Brain size={20} />
                                        <span className="text-xs">Skip ({powerUps.skipQuestion})</span>
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Shop Screen */}
                        {screen === 'shop' && (
                            <div className="bg-white rounded-lg shadow-2xl p-8">
                                <h2 className="text-3xl font-bold text-purple-600 mb-6">Power-Up Shop</h2>
                                
                                {/* Ad for bonus coins */}
                                <div className="bg-gradient-to-r from-yellow-100 to-orange-100 border-2 border-orange-300 rounded-lg p-4 mb-6 text-center">
                                    <h3 className="font-bold text-orange-700 mb-2">💰 Need More Coins?</h3>
                                    <button
                                        onClick={() => showRewardedAd('coins')}
                                        disabled={!canWatchAd}
                                        className="bg-orange-500 text-white px-6 py-2 rounded hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
                                    >
                                        Watch Ad for +25 Coins
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div className="border-2 border-blue-300 rounded-lg p-4">
                                        <div className="flex items-center gap-2 mb-2">
                                            <Clock className="text-blue-500" />
                                            <h3 className="font-bold">Time Freeze</h3>
                                        </div>
                                        <p className="text-sm text-gray-600 mb-3">Add 15 seconds to the timer</p>
                                        <button
                                            onClick={() => buyPowerUp('timeFreeze', 10)}
                                            className="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600"
                                        >
                                            Buy for 10 coins
                                        </button>
                                    </div>

                                    <div className="border-2 border-red-300 rounded-lg p-4">
                                        <div className="flex items-center gap-2 mb-2">
                                            <Heart className="text-red-500" />
                                            <h3 className="font-bold">Extra Life</h3>
                                        </div>
                                        <p className="text-sm text-gray-600 mb-3">Gain one additional life</p>
                                        <button
                                            onClick={() => buyPowerUp('extraLife', 15)}
                                            className="w-full bg-red-500 text-white py-2 rounded hover:bg-red-600"
                                        >
                                            Buy for 15 coins
                                        </button>
                                    </div>

                                    <div className="border-2 border-yellow-300 rounded-lg p-4">
                                        <div className="flex items-center gap-2 mb-2">
                                            <Zap className="text-yellow-500" />
                                            <h3 className="font-bold">Double Points</h3>
                                        </div>
                                        <p className="text-sm text-gray-600 mb-3">Earn 2x points for 10 seconds</p>
                                        <button
                                            onClick={() => buyPowerUp('doublePoints', 20)}
                                            className="w-full bg-yellow-500 text-white py-2 rounded hover:bg-yellow-600"
                                        >
                                            Buy for 20 coins
                                        </button>
                                    </div>

                                    <div className="border-2 border-green-300 rounded-lg p-4">
                                        <div className="flex items-center gap-2 mb-2">
                                            <Brain className="text-green-500" />
                                            <h3 className="font-bold">Skip Question</h3>
                                        </div>
                                        <p className="text-sm text-gray-600 mb-3">Skip current question</p>
                                        <button
                                            onClick={() => buyPowerUp('skipQuestion', 12)}
                                            className="w-full bg-green-500 text-white py-2 rounded hover:bg-green-600"
                                        >
                                            Buy for 12 coins
                                        </button>
                                    </div>
                                </div>
                                
                                <button
                                    onClick={() => setScreen('menu')}
                                    className="w-full bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700"
                                >
                                    Back to Menu
                                </button>
                            </div>
                        )}

                        {/* Achievements Screen */}
                        {screen === 'achievements' && (
                            <div className="bg-white rounded-lg shadow-2xl p-8">
                                <h2 className="text-3xl font-bold text-purple-600 mb-6">Achievements</h2>
                                <div className="bg-blue-50 border-2 border-blue-300 rounded-lg p-4 mb-4">
                                    <p className="text-blue-700 font-bold">📺 Total Ads Watched: {totalAdsWatched}</p>
                                </div>
                                <div className="space-y-3 mb-6">
                                    <div className={`p-4 rounded-lg ${achievements.firstWin ? 'bg-green-100 border-2 border-green-400' : 'bg-gray-100'}`}>
                                        <div className="flex items-center gap-3">
                                            <Trophy className={achievements.firstWin ? 'text-green-600' : 'text-gray-400'} />
                                            <div>
                                                <h3 className="font-bold">First Victory</h3>
                                                <p className="text-sm text-gray-600">Complete your first game</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div className={`p-4 rounded-lg ${achievements.streakMaster ? 'bg-green-100 border-2 border-green-400' : 'bg-gray-100'}`}>
                                        <div className="flex items-center gap-3">
                                            <Zap className={achievements.streakMaster ? 'text-green-600' : 'text-gray-400'} />
                                            <div>
                                                <h3 className="font-bold">Streak Master</h3>
                                                <p className="text-sm text-gray-600">Get 5 correct answers in a row</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div className={`p-4 rounded-lg ${achievements.shopaholic ? 'bg-green-100 border-2 border-green-400' : 'bg-gray-100'}`}>
                                        <div className="flex items-center gap-3">
                                            <ShoppingBag className={achievements.shopaholic ? 'text-green-600' : 'text-gray-400'} />
                                            <div>
                                                <h3 className="font-bold">Shopaholic</h3>
                                                <p className="text-sm text-gray-600">Buy 5 power-ups</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div className={`p-4 rounded-lg ${achievements.mathematician ? 'bg-green-100 border-2 border-green-400' : 'bg-gray-100'}`}>
                                        <div className="flex items-center gap-3">
                                            <Brain className={achievements.mathematician ? 'text-green-600' : 'text-gray-400'} />
                                            <div>
                                                <h3 className="font-bold">Mathematician</h3>
                                                <p className="text-sm text-gray-600">Score 100 points in one game</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div className={`p-4 rounded-lg ${achievements.survivor ? 'bg-green-100 border-2 border-green-400' : 'bg-gray-100'}`}>
                                        <div className="flex items-center gap-3">
                                            <Heart className={achievements.survivor ? 'text-green-600' : 'text-gray-400'} />
                                            <div>
                                                <h3 className="font-bold">Survivor</h3>
                                                <p className="text-sm text-gray-600">Complete a game without losing all lives</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button
                                    onClick={() => setScreen('menu')}
                                    className="w-full bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700"
                                >
                                    Back to Menu
                                </button>
                            </div>
                        )}

                        {/* Game Over Screen */}
                        {screen === 'gameOver' && (
                            <div className="bg-white rounded-lg shadow-2xl p-8 text-center">
                                {isCheating ? (
                                    <>
                                        <h2 className="text-4xl font-bold text-red-600 mb-4">Cheating Detected!</h2>
                                        <p className="text-xl mb-4">Suspicious activity was detected during gameplay.</p>
                                        <p className="text-gray-600 mb-6">No coins will be awarded.</p>
                                        <button
                                            onClick={() => {
                                                setScreen('menu');
                                            }}
                                            className="w-full bg-red-600 text-white py-4 rounded-lg text-xl font-bold hover:bg-red-700 transition"
                                        >
                                            Return to Menu
                                        </button>
                                    </>
                                ) : (
                                    <>
                                        <h2 className="text-4xl font-bold text-purple-600 mb-4">Game Over!</h2>
                                        <div className="text-2xl mb-6">
                                            <p className="mb-2">Final Score: <span className="font-bold text-purple-600">{score}</span></p>
                                            <p className="mb-2">Best Streak: <span className="font-bold text-orange-600">{streak}</span></p>
                                            <p className="mb-4">Coins Earned: <span className="font-bold text-yellow-600">+{Math.floor(score / 2)}</span></p>
                                            
                                            {score >= 50 && level === unlockedLevels - 1 && (
                                                <div className="bg-green-100 border-2 border-green-400 rounded-lg p-4 mb-4">
                                                    <p className="text-green-700 font-bold text-xl">🎉 Level {unlockedLevels} Unlocked! 🎉</p>
                                                </div>
                                            )}
                                            
                                            {score < 50 && level === unlockedLevels && unlockedLevels < 10 && (
                                                <div className="bg-orange-100 border-2 border-orange-400 rounded-lg p-4 mb-4">
                                                    <p className="text-orange-700 font-semibold">Score 50+ to unlock Level {unlockedLevels + 1}!</p>
                                                    <p className="text-sm text-orange-600">You scored {score} points</p>
                                                </div>
                                            )}
                                        </div>

                                        {/* Bonus coins ad offer */}
                                        <div className="bg-gradient-to-r from-yellow-100 to-orange-100 border-2 border-orange-300 rounded-lg p-4 mb-4">
                                            <p className="text-orange-700 font-bold mb-2">💎 Double Your Coins!</p>
                                            <button
                                                onClick={() => {
                                                    showRewardedAd('coins');
                                                    setCoins(coins + Math.floor(score));
                                                }}
                                                disabled={!canWatchAd}
                                                className="bg-orange-500 text-white px-6 py-2 rounded hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
                                            >
                                                Watch Ad to Double Coins
                                            </button>
                                        </div>

                                        <button
                                            onClick={() => {
                                                setCoins(coins + Math.floor(score / 2));
                                                setScreen('menu');
                                            }}
                                            className="w-full bg-purple-600 text-white py-4 rounded-lg text-xl font-bold hover:bg-purple-700 transition"
                                        >
                                            Continue
                                        </button>
                                    </>
                                )}
                            </div>
                        )}

                        {/* Ad Modal Overlay */}
                        {showAd && (
                            <div className="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4">
                                <div className="bg-white rounded-lg max-w-md w-full p-6 relative">
                                    {adType === 'interstitial' ? (
                                        <>
                                            <div className="text-center">
                                                <div className="text-xs text-gray-500 mb-2">ADVERTISEMENT</div>
                                                <div className="bg-gradient-to-r from-purple-400 to-pink-500 rounded-lg p-8 mb-4">
                                                    <p className="text-white text-3xl font-bold mb-2">Special Offer!</p>
                                                    <p className="text-white text-lg">Get 50% OFF Premium!</p>
                                                    <p className="text-white/80 text-sm mt-4">Limited time only</p>
                                                </div>
                                                <p className="text-gray-600 mb-2">Continue in {adTimeLeft} seconds...</p>
                                                {adTimeLeft === 0 && (
                                                    <button
                                                        onClick={closeAd}
                                                        className="bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700"
                                                    >
                                                        Close
                                                    </button>
                                                )}
                                            </div>
                                        </>
                                    ) : adType === 'rewarded' ? (
                                        <>
                                            <div className="text-center">
                                                <div className="text-xs text-gray-500 mb-2">REWARDED VIDEO AD</div>
                                                <button
                                                    onClick={() => setAdMuted(!adMuted)}
                                                    className="absolute top-4 right-4 text-gray-500 hover:text-gray-700"
                                                >
                                                    {adMuted ? <VolumeX size={20} /> : <Volume2 size={20} />}
                                                </button>
                                                <div className="bg-gradient-to-r from-green-400 to-blue-500 rounded-lg p-8 mb-4 relative overflow-hidden">
                                                    <div className="absolute inset-0 bg-white/10 animate-pulse"></div>
                                                    <Play className="text-white mx-auto mb-2" size={48} />
                                                    <p className="text-white text-2xl font-bold mb-2">Watching Video...</p>
                                                    <p className="text-white text-lg">{10 - adTimeLeft}/10 seconds</p>
                                                    <div className="mt-4 bg-white/20 rounded-full h-2">
                                                        <div 
                                                            className="bg-white rounded-full h-2 transition-all duration-1000"
                                                            style={{width: `${((10 - adTimeLeft) / 10) * 100}%`}}
                                                        ></div>
                                                    </div>
                                                </div>
                                                <p className="text-gray-600 mb-2">
                                                    {adTimeLeft > 0 ? `Watch for ${adTimeLeft} more seconds...` : 'Reward ready!'}
                                                </p>
                                                {adTimeLeft === 0 && (
                                                    <button
                                                        onClick={closeAd}
                                                        className="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700"
                                                    >
                                                        Claim Reward
                                                    </button>
                                                )}
                                            </div>
                                        </>
                                    ) : null}
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Footer with LetUsTech Branding */}
                    <footer className="max-w-6xl mx-auto mt-8 mb-4">
                        <div className="bg-white/10 backdrop-blur rounded-lg p-6 text-center">
                            <div className="flex items-center justify-center gap-2 mb-4">
                                <img 
                                    src="https://raw.githubusercontent.com/letustec-oss/LetUsTech/main/LetUsTech.PNG" 
                                    alt="LetUsTech"
                                    className="h-8 w-8 rounded"
                                />
                                <span className="text-white font-bold text-lg">LetUsTech</span>
                                <span className="text-white/70 text-sm italic">- Wired For Your World</span>
                            </div>
                            
                            {/* Navigation Links */}
                            <div className="flex flex-wrap justify-center gap-4 mb-4 text-white/80 text-sm">
                                <a 
                                    href="index.html" 
                                    className="hover:text-white transition-colors hover:underline"
                                >
                                    🏠 Home
                                </a>
                                <span className="text-white/40">•</span>
                                <a 
                                    href="index.html#about" 
                                    className="hover:text-white transition-colors hover:underline"
                                >
                                    ℹ️ About
                                </a>
                                <span className="text-white/40">•</span>
                                <a 
                                    href="index.html#programs" 
                                    className="hover:text-white transition-colors hover:underline"
                                >
                                    📦 Programs
                                </a>
                                <span className="text-white/40">•</span>
                                <a 
                                    href="index.html#contact" 
                                    className="hover:text-white transition-colors hover:underline"
                                >
                                    📧 Contact
                                </a>
                                <span className="text-white/40">•</span>
                                <a 
                                    href="index.html#donate" 
                                    className="hover:text-white transition-colors hover:underline"
                                >
                                    💝 Donate
                                </a>
                            </div>

                            {/* Social & Info Links */}
                            <div className="flex flex-wrap justify-center gap-4 mb-3 text-white/70 text-sm">
                                <a 
                                    href="https://discord.gg/dkebMS5eCX" 
                                    target="_blank" 
                                    rel="noopener noreferrer"
                                    className="hover:text-white transition-colors"
                                >
                                    💬 Discord Community
                                </a>
                                <span className="text-white/40">•</span>
                                <a 
                                    href="https://letustech.co.za" 
                                    target="_blank" 
                                    rel="noopener noreferrer"
                                    className="hover:text-white transition-colors"
                                >
                                    🌐 Website
                                </a>
                                <span className="text-white/40">•</span>
                                <a 
                                    href="https://github.com/letustec-oss/LetUsTech" 
                                    target="_blank" 
                                    rel="noopener noreferrer"
                                    className="hover:text-white transition-colors"
                                >
                                    💻 GitHub
                                </a>
                            </div>

                            <p className="text-white/80 text-sm mb-1">
                                © 2024 LetUsTech - Educational Gaming Solutions
                            </p>
                            <p className="text-white/50 text-xs">
                                Math Quest v1.0.0 | Built with React & Tailwind CSS
                            </p>
                        </div>
                    </footer>
                </div>
            );
        }

        // Render the game
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MathGame />);
    </script>
</body>
</html>